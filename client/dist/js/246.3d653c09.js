"use strict";(self["webpackChunktest_case_generator_client"]=self["webpackChunktest_case_generator_client"]||[]).push([[246],{4246:function(e,l,a){a.r(l),a.d(l,{default:function(){return D}});var t=a(641),n=a(33);const i={class:"api-generate"},r={class:"step-section"},o={key:0,class:"step-section"},c={key:0,class:"curl-input-section"},s={class:"curl-header"},u={class:"curl-list"},d={class:"curl-item-header"},p={class:"curl-index"},m={class:"api-input-row"},k={class:"api-name-input"},g={class:"api-curl-input"},b={key:1,class:"doc-input-section"},f={class:"action-buttons"},v={key:1,class:"result-section"},_={class:"result-actions"},y=["innerHTML"];function F(e,l,a,F,L,h){const C=(0,t.g2)("el-radio-button"),w=(0,t.g2)("el-radio-group"),R=(0,t.g2)("Plus"),U=(0,t.g2)("el-icon"),$=(0,t.g2)("el-button"),D=(0,t.g2)("Delete"),V=(0,t.g2)("el-input"),T=(0,t.g2)("el-form-item"),A=(0,t.g2)("el-form"),E=(0,t.g2)("Magic"),W=(0,t.g2)("RefreshLeft"),x=(0,t.g2)("el-divider"),N=(0,t.g2)("CopyDocument"),X=(0,t.g2)("Download"),z=(0,t.g2)("el-empty"),I=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(I,{class:"page-card"},{header:(0,t.k6)(()=>l[3]||(l[3]=[(0,t.Lk)("div",{class:"card-header"},[(0,t.Lk)("h2",null,"接口用例生成"),(0,t.Lk)("p",null,"基于接口信息自动生成测试用例")],-1)])),default:(0,t.k6)(()=>[(0,t.Lk)("div",r,[l[6]||(l[6]=(0,t.Lk)("h3",{class:"step-title"},"第一步：选择输入方式",-1)),(0,t.bF)(w,{modelValue:F.generateForm.inputType,"onUpdate:modelValue":l[0]||(l[0]=e=>F.generateForm.inputType=e),class:"input-type-selector"},{default:(0,t.k6)(()=>[(0,t.bF)(C,{label:"curl"},{default:(0,t.k6)(()=>l[4]||(l[4]=[(0,t.eW)("cURL命令",-1)])),_:1,__:[4]}),(0,t.bF)(C,{label:"doc"},{default:(0,t.k6)(()=>l[5]||(l[5]=[(0,t.eW)("接口文档",-1)])),_:1,__:[5]})]),_:1},8,["modelValue"])]),F.generateForm.inputType?((0,t.uX)(),(0,t.CE)("div",o,[l[14]||(l[14]=(0,t.Lk)("h3",{class:"step-title"},"第二步：输入接口信息",-1)),"curl"===F.generateForm.inputType?((0,t.uX)(),(0,t.CE)("div",c,[(0,t.Lk)("div",s,[l[8]||(l[8]=(0,t.Lk)("h3",null,"接口信息输入",-1)),(0,t.bF)($,{type:"primary",size:"small",onClick:F.addApiInput},{default:(0,t.k6)(()=>[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(R)]),_:1}),l[7]||(l[7]=(0,t.eW)(" 添加接口 ",-1))]),_:1,__:[7]},8,["onClick"])]),(0,t.Lk)("div",u,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(F.generateForm.apiList,(e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"curl-item"},[(0,t.Lk)("div",d,[(0,t.Lk)("span",p,"接口 "+(0,n.v_)(a+1),1),F.generateForm.apiList.length>1?((0,t.uX)(),(0,t.Wv)($,{key:0,type:"danger",size:"small",text:"",onClick:e=>F.removeApiInput(a)},{default:(0,t.k6)(()=>[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(D)]),_:1}),l[9]||(l[9]=(0,t.eW)(" 删除 ",-1))]),_:2,__:[9]},1032,["onClick"])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",m,[(0,t.Lk)("div",k,[l[10]||(l[10]=(0,t.Lk)("label",null,"接口名称：",-1)),(0,t.bF)(V,{modelValue:e.name,"onUpdate:modelValue":l=>e.name=l,placeholder:"请输入接口名称..."},null,8,["modelValue","onUpdate:modelValue"])]),(0,t.Lk)("div",g,[l[11]||(l[11]=(0,t.Lk)("label",null,"cURL命令：",-1)),(0,t.bF)(V,{modelValue:e.command,"onUpdate:modelValue":l=>e.command=l,type:"textarea",rows:4,placeholder:"请输入cURL命令..."},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))])])):(0,t.Q3)("",!0),"doc"===F.generateForm.inputType?((0,t.uX)(),(0,t.CE)("div",b,[(0,t.bF)(A,{"label-position":"top"},{default:(0,t.k6)(()=>[(0,t.bF)(T,{label:"接口名称",required:""},{default:(0,t.k6)(()=>[(0,t.bF)(V,{modelValue:F.generateForm.singleApiName,"onUpdate:modelValue":l[1]||(l[1]=e=>F.generateForm.singleApiName=e),placeholder:"请输入接口名称",clearable:""},null,8,["modelValue"])]),_:1}),(0,t.bF)(T,{label:"接口文档",required:""},{default:(0,t.k6)(()=>[(0,t.bF)(V,{modelValue:F.generateForm.apiDoc,"onUpdate:modelValue":l[2]||(l[2]=e=>F.generateForm.apiDoc=e),type:"textarea",rows:10,placeholder:"请输入接口文档内容，包括请求方法、URL、参数说明、响应格式等...",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})])):(0,t.Q3)("",!0),(0,t.Lk)("div",f,[(0,t.bF)($,{type:"primary",onClick:F.generateTestCases,loading:F.loading,size:"large"},{default:(0,t.k6)(()=>[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(E)]),_:1}),l[12]||(l[12]=(0,t.eW)(" 生成测试用例 ",-1))]),_:1,__:[12]},8,["onClick","loading"]),(0,t.bF)($,{onClick:F.clearForm,size:"large"},{default:(0,t.k6)(()=>[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(W)]),_:1}),l[13]||(l[13]=(0,t.eW)(" 清空表单 ",-1))]),_:1,__:[13]},8,["onClick"])])])):(0,t.Q3)("",!0),(0,t.bF)(x,null,{default:(0,t.k6)(()=>l[15]||(l[15]=[(0,t.eW)("生成结果",-1)])),_:1,__:[15]}),F.result?((0,t.uX)(),(0,t.CE)("div",v,[(0,t.Lk)("div",_,[(0,t.bF)($,{onClick:F.copyResult,size:"small"},{default:(0,t.k6)(()=>[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(N)]),_:1}),l[16]||(l[16]=(0,t.eW)(" 复制内容 ",-1))]),_:1,__:[16]},8,["onClick"]),(0,t.bF)($,{onClick:F.downloadResult,size:"small",type:"success"},{default:(0,t.k6)(()=>[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(X)]),_:1}),(0,t.eW)(" "+(0,n.v_)(F.downloadUrl?"下载Excel表格":"下载文本文件"),1)]),_:1},8,["onClick"])]),(0,t.Lk)("div",{class:"markdown-content",innerHTML:F.result},null,8,y)])):((0,t.uX)(),(0,t.Wv)(z,{key:2,description:"暂无生成结果"}))]),_:1})])}var L=a(953),h=a(163),C=a(8548),w=a(4335),R={name:"ApiGenerate",components:{Magic:C.Magic,RefreshLeft:C.RefreshLeft,CopyDocument:C.CopyDocument,Download:C.Download,Plus:C.Plus,Delete:C.Delete},setup(){const e=(0,L.KR)(!1),l=(0,L.KR)(""),a=(0,L.KR)(""),t=(0,L.Kh)({inputType:"",apiList:[{name:"",command:""}],singleApiName:"",apiDoc:""}),n=()=>{t.apiList.push({name:"",command:""})},i=e=>{t.apiList.length>1&&t.apiList.splice(e,1)},r=async()=>{if("curl"===t.inputType){const e=t.apiList.some(e=>e.name.trim()&&e.command.trim());if(!e)return void h.nk.warning("请至少输入一个完整的接口（包含接口名称和cURL命令）");const l=t.apiList.filter(e=>e.name.trim()&&!e.command.trim()||!e.name.trim()&&e.command.trim());if(l.length>0)return void h.nk.warning("请确保每个接口都包含名称和cURL命令，或删除不需要的接口")}if("doc"===t.inputType){if(!t.singleApiName.trim())return void h.nk.warning("请输入接口名称");if(!t.apiDoc.trim())return void h.nk.warning("请输入接口文档")}e.value=!0;try{let e={};if("curl"===t.inputType){const l=t.apiList.filter(e=>e.name.trim()&&e.command.trim());if(1===l.length)e={apiName:l[0].name.trim(),curlCommands:l[0].command.trim()};else{const a=l.map(e=>e.name.trim()).join("、"),t=l.map((e,l)=>`# ${e.name.trim()}\n${e.command.trim()}`).join("\n\n");e={apiName:`多接口测试用例（${a}）`,curlCommands:t}}}else e={apiName:t.singleApiName.trim(),apiDoc:t.apiDoc.trim()};const n=await w.A.post("/api/generate-api-test",e);n.data.success?(l.value=c(n.data.content),a.value=n.data.downloadUrl||"",h.nk.success("测试用例生成成功！")):h.nk.error(n.data.error||"生成失败")}catch(n){console.error("生成测试用例失败:",n),h.nk.error("生成测试用例失败，请稍后重试")}finally{e.value=!1}},o=()=>{t.inputType="",t.apiList=[{name:"",command:""}],t.singleApiName="",t.apiDoc="",l.value="",a.value=""},c=e=>e.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/^#### (.*$)/gim,"<h4>$1</h4>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>").replace(/^- (.*$)/gim,"<li>$1</li>").replace(/(<li>.*<\/li>)/s,"<ul>$1</ul>"),s=async()=>{try{const e=l.value.replace(/<[^>]*>/g,"").replace(/<br>/g,"\n");await navigator.clipboard.writeText(e),h.nk.success("内容已复制到剪贴板")}catch(e){h.nk.error("复制失败，请手动复制")}},u=async()=>{try{if(a.value){const e=document.createElement("a");return e.href=a.value,e.download="",document.body.appendChild(e),e.click(),document.body.removeChild(e),void h.nk.success("Excel文件下载成功")}const e=l.value.replace(/<[^>]*>/g,"").replace(/<br>/g,"\n"),t=new Blob([e],{type:"text/plain;charset=utf-8"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=`api-test-cases-${Date.now()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),h.nk.success("文件下载成功")}catch(e){h.nk.error("下载失败，请稍后重试")}};return{generateForm:t,loading:e,result:l,downloadUrl:a,addApiInput:n,removeApiInput:i,generateTestCases:r,clearForm:o,markdownToHtml:c,copyResult:s,downloadResult:u}}},U=a(6262);const $=(0,U.A)(R,[["render",F],["__scopeId","data-v-64f3c762"]]);var D=$}}]);
//# sourceMappingURL=246.3d653c09.js.map