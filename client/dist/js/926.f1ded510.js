"use strict";(self["webpackChunktest_case_generator_client"]=self["webpackChunktest_case_generator_client"]||[]).push([[926],{4926:function(e,t,l){l.r(t),l.d(t,{default:function(){return U}});var a=l(641),o=l(33);const s={class:"home"},d={class:"card-header"},i={class:"api-selection"},n={class:"api-description"},c={key:0,class:"api-desc"},r={key:1,class:"api-desc"},u={class:"input-mode-selection"},p={key:0,class:"mode-notice"},k={class:"input-section"},h={key:0,class:"text-input-area"},b={key:1,class:"file-upload-area"},f={class:"input-header"},m={class:"action-section"},y={class:"card-header"},_={class:"header-actions"},g={class:"result-content"};function v(e,t,l,v,x,C){const w=(0,a.g2)("DocumentAdd"),F=(0,a.g2)("el-icon"),L=(0,a.g2)("el-radio-button"),A=(0,a.g2)("el-radio-group"),U=(0,a.g2)("Star"),W=(0,a.g2)("Cpu"),M=(0,a.g2)("el-alert"),I=(0,a.g2)("el-input"),T=(0,a.g2)("upload-filled"),E=(0,a.g2)("el-upload"),R=(0,a.g2)("Magic"),V=(0,a.g2)("el-button"),X=(0,a.g2)("el-card"),Q=(0,a.g2)("Download"),D=(0,a.g2)("DocumentCopy");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(X,{class:"main-card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",d,[t[3]||(t[3]=(0,a.Lk)("span",null,"测试用例生成器",-1)),(0,a.bF)(F,null,{default:(0,a.k6)(()=>[(0,a.bF)(w)]),_:1})])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",i,[t[8]||(t[8]=(0,a.Lk)("h3",null,"选择AI服务",-1)),(0,a.bF)(A,{modelValue:x.selectedApi,"onUpdate:modelValue":t[0]||(t[0]=e=>x.selectedApi=e),class:"api-radio-group"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{label:"cybotstar"},{default:(0,a.k6)(()=>t[4]||(t[4]=[(0,a.eW)("Cybotstar AI",-1)])),_:1,__:[4]}),(0,a.bF)(L,{label:"deepseek"},{default:(0,a.k6)(()=>t[5]||(t[5]=[(0,a.eW)("DeepSeek AI",-1)])),_:1,__:[5]})]),_:1},8,["modelValue"]),(0,a.Lk)("div",n,["cybotstar"===x.selectedApi?((0,a.uX)(),(0,a.CE)("span",c,[(0,a.bF)(F,null,{default:(0,a.k6)(()=>[(0,a.bF)(U)]),_:1}),t[6]||(t[6]=(0,a.eW)(" Cybotstar AI - 专业的测试用例生成服务 ",-1))])):(0,a.Q3)("",!0),"deepseek"===x.selectedApi?((0,a.uX)(),(0,a.CE)("span",r,[(0,a.bF)(F,null,{default:(0,a.k6)(()=>[(0,a.bF)(W)]),_:1}),t[7]||(t[7]=(0,a.eW)(" DeepSeek AI - 强大的代码理解和生成能力 ",-1))])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",u,[t[12]||(t[12]=(0,a.Lk)("h3",null,"选择输入方式",-1)),(0,a.bF)(A,{modelValue:x.inputMode,"onUpdate:modelValue":t[1]||(t[1]=e=>x.inputMode=e),class:"mode-radio-group"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{label:"text"},{default:(0,a.k6)(()=>t[9]||(t[9]=[(0,a.eW)("文本输入",-1)])),_:1,__:[9]}),(0,a.bF)(L,{label:"file",disabled:"cybotstar"===x.selectedApi},{default:(0,a.k6)(()=>t[10]||(t[10]=[(0,a.eW)("文件上传",-1)])),_:1,__:[10]},8,["disabled"])]),_:1},8,["modelValue"]),"cybotstar"===x.selectedApi&&"file"===x.inputMode?((0,a.uX)(),(0,a.CE)("div",p,[(0,a.bF)(M,{title:"该功能后续支持",type:"warning",closable:!1,"show-icon":""},{default:(0,a.k6)(()=>t[11]||(t[11]=[(0,a.eW)(" Cybotstar AI 暂不支持文件上传功能，请使用文本输入方式。 ",-1)])),_:1,__:[11]})])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",k,["text"===x.inputMode?((0,a.uX)(),(0,a.CE)("div",h,[t[13]||(t[13]=(0,a.Lk)("div",{class:"input-header"},[(0,a.Lk)("h3",null,"文本输入")],-1)),(0,a.bF)(I,{modelValue:x.textInput,"onUpdate:modelValue":t[2]||(t[2]=e=>x.textInput=e),type:"textarea",rows:10,placeholder:"请输入需要生成测试用例的需求描述或功能说明...\\n\\n例如：\\n- 输入框只能输入1-10的数字\\n- 用户登录功能验证\\n- 购物车添加商品功能",class:"text-input"},null,8,["modelValue"])])):(0,a.Q3)("",!0),"file"===x.inputMode?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.Lk)("div",f,[t[15]||(t[15]=(0,a.Lk)("h3",null,"文件上传",-1)),"cybotstar"===x.selectedApi?((0,a.uX)(),(0,a.Wv)(M,{key:0,title:"文件上传功能后续支持",type:"info",closable:!1,"show-icon":"",class:"upload-notice"},{default:(0,a.k6)(()=>t[14]||(t[14]=[(0,a.eW)(" 当前版本仅支持文本输入生成测试用例，文件上传功能将在后续版本中提供。 ",-1)])),_:1,__:[14]})):(0,a.Q3)("",!0)]),(0,a.bF)(E,{ref:"uploadRef",class:"upload-demo",drag:"","auto-upload":!1,"on-change":C.handleFileChange,"on-remove":C.handleFileRemove,"file-list":x.fileList,accept:".txt,.md,.docx,.doc,.pdf,.xlsx,.xls,.json,.xml,.csv",limit:1,disabled:"cybotstar"===x.selectedApi},{tip:(0,a.k6)(()=>t[16]||(t[16]=[(0,a.Lk)("div",{class:"el-upload__tip"}," 支持格式：.txt, .md, .docx, .doc, .pdf, .xlsx, .xls, .json, .xml, .csv（最大10MB） ",-1)])),default:(0,a.k6)(()=>[(0,a.bF)(F,{class:"el-icon--upload"},{default:(0,a.k6)(()=>[(0,a.bF)(T)]),_:1}),t[17]||(t[17]=(0,a.Lk)("div",{class:"el-upload__text"},[(0,a.eW)(" 将文件拖到此处，或"),(0,a.Lk)("em",null,"点击上传")],-1))]),_:1,__:[17]},8,["on-change","on-remove","file-list","disabled"])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",m,[(0,a.bF)(V,{type:"primary",size:"large",loading:x.loading,onClick:C.generateTestCases,disabled:!C.canGenerate,class:"generate-btn"},{default:(0,a.k6)(()=>[x.loading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(F,{key:0},{default:(0,a.k6)(()=>[(0,a.bF)(R)]),_:1})),(0,a.eW)(" "+(0,o.v_)(x.loading?"生成中...":"开始生成测试用例"),1)]),_:1},8,["loading","onClick","disabled"])])]),_:1}),x.result?((0,a.uX)(),(0,a.Wv)(X,{key:0,class:"result-card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",y,[t[20]||(t[20]=(0,a.Lk)("span",null,"生成结果",-1)),(0,a.Lk)("div",_,[(0,a.bF)(V,{type:"success",size:"small",onClick:C.downloadResult,disabled:!x.downloadUrl},{default:(0,a.k6)(()=>[(0,a.bF)(F,null,{default:(0,a.k6)(()=>[(0,a.bF)(Q)]),_:1}),t[18]||(t[18]=(0,a.eW)(" 下载文件 ",-1))]),_:1,__:[18]},8,["onClick","disabled"]),(0,a.bF)(V,{size:"small",onClick:C.copyToClipboard},{default:(0,a.k6)(()=>[(0,a.bF)(F,null,{default:(0,a.k6)(()=>[(0,a.bF)(D)]),_:1}),t[19]||(t[19]=(0,a.eW)(" 复制内容 ",-1))]),_:1,__:[19]},8,["onClick"])])])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",g,[(0,a.Lk)("pre",null,(0,o.v_)(x.result),1)])]),_:1})):(0,a.Q3)("",!0)])}var x=l(4335),C=l(163),w=l(8548),F={name:"Home",components:{UploadFilled:w.UploadFilled},data(){return{textInput:"",loading:!1,result:"",downloadUrl:"",selectedApi:"cybotstar",inputMode:"text",fileList:[],uploadedFile:null}},computed:{canGenerate(){return"text"===this.inputMode?this.textInput.trim().length>0&&this.selectedApi:this.uploadedFile&&this.selectedApi}},watch:{selectedApi(e){"cybotstar"===e&&"file"===this.inputMode&&(this.inputMode="text",this.fileList=[],this.uploadedFile=null)}},methods:{async generateTestCases(){this.loading=!0,this.result="",this.downloadUrl="";try{let e;if("text"===this.inputMode)e=await x.A.post("/api/generate",{content:this.textInput,apiProvider:this.selectedApi},{headers:{"Content-Type":"application/json"}});else{const t=new FormData;t.append("file",this.uploadedFile),t.append("apiProvider",this.selectedApi),e=await x.A.post("/api/generate",t,{headers:{"Content-Type":"multipart/form-data"}})}if(!e.data.success)throw new Error(e.data.error||"生成失败");this.result=e.data.content,this.downloadUrl=e.data.downloadUrl,C.nk.success("测试用例生成成功！")}catch(e){console.error("生成失败:",e),C.nk.error(e.response?.data?.error||"生成测试用例失败，请稍后重试")}finally{this.loading=!1}},handleFileChange(e){const t=e.size/1024/1024<10;if(!t)return C.nk.error("文件大小不能超过 10MB!"),!1;const l=[".txt",".md",".docx",".doc",".pdf",".xlsx",".xls",".json",".xml",".csv"],a=e.name.toLowerCase(),o=l.some(e=>a.endsWith(e));if(!o)return C.nk.error("不支持的文件格式！"),!1;this.uploadedFile=e.raw,C.nk.success("文件上传成功！")},handleFileRemove(){this.uploadedFile=null,this.fileList=[]},async downloadResult(){if(this.downloadUrl)try{const e=await x.A.get(this.downloadUrl,{responseType:"blob"}),t=new Blob([e.data],{type:"application/octet-stream"}),l=window.URL.createObjectURL(t),a=document.createElement("a");a.href=l,a.download=`test-cases-${(new Date).getTime()}.xmind`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(l),C.nk.success("文件下载成功！")}catch(e){console.error("下载失败:",e),C.nk.error("文件下载失败")}},async copyToClipboard(){try{navigator.clipboard&&window.isSecureContext?(await navigator.clipboard.writeText(this.result),C.nk.success("内容已复制到剪贴板！")):this.fallbackCopyToClipboard(this.result)}catch(e){console.error("复制失败:",e);try{this.fallbackCopyToClipboard(this.result)}catch(t){console.error("降级复制也失败:",t),C.nk.error("复制失败，请手动选择文本复制")}}},fallbackCopyToClipboard(e){const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{const e=document.execCommand("copy");if(!e)throw new Error("execCommand failed");C.nk.success("内容已复制到剪贴板！")}finally{document.body.removeChild(t)}}}},L=l(6262);const A=(0,L.A)(F,[["render",v],["__scopeId","data-v-2be44d89"]]);var U=A}}]);
//# sourceMappingURL=926.f1ded510.js.map