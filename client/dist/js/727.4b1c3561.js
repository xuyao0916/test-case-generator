"use strict";(self["webpackChunktest_case_generator_client"]=self["webpackChunktest_case_generator_client"]||[]).push([[727],{2108:function(e,l,a){a.r(l),a.d(l,{default:function(){return V}});var t=a(641),s=a(33);const n={class:"test-case-review"},o={class:"card-header"},r={class:"feature-description"},d={class:"api-selection"},u={class:"api-description"},i={key:0,class:"api-desc"},c={key:1,class:"api-desc"},p={class:"upload-section"},v={key:0,class:"review-config"},g={key:1,class:"action-section"},b={class:"progress-content"},k={class:"progress-text"},m={class:"card-header"},_={class:"header-actions"},f={class:"result-content"},w={class:"review-summary"},F=["innerHTML"],h=["innerHTML"];function y(e,l,a,y,C,L){const R=(0,t.g2)("Document"),x=(0,t.g2)("el-icon"),T=(0,t.g2)("el-alert"),W=(0,t.g2)("el-radio-button"),S=(0,t.g2)("el-radio-group"),V=(0,t.g2)("Star"),A=(0,t.g2)("Cpu"),D=(0,t.g2)("upload-filled"),I=(0,t.g2)("el-upload"),K=(0,t.g2)("el-checkbox"),U=(0,t.g2)("el-checkbox-group"),X=(0,t.g2)("el-form-item"),E=(0,t.g2)("el-col"),Q=(0,t.g2)("el-radio"),q=(0,t.g2)("el-row"),M=(0,t.g2)("el-input"),z=(0,t.g2)("el-form"),H=(0,t.g2)("Search"),N=(0,t.g2)("el-button"),P=(0,t.g2)("el-progress"),j=(0,t.g2)("el-card"),$=(0,t.g2)("Download"),J=(0,t.g2)("CopyDocument"),O=(0,t.g2)("el-rate"),B=(0,t.g2)("el-descriptions-item"),G=(0,t.g2)("el-tag"),Y=(0,t.g2)("el-descriptions"),Z=(0,t.g2)("el-tab-pane"),ee=(0,t.g2)("el-tabs");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(j,{class:"main-card",shadow:"hover"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",o,[(0,t.Lk)("h2",null,[(0,t.bF)(x,null,{default:(0,t.k6)(()=>[(0,t.bF)(R)]),_:1}),l[6]||(l[6]=(0,t.eW)(" 用例评审",-1))]),l[7]||(l[7]=(0,t.Lk)("p",{class:"card-subtitle"},"上传测试用例文件，AI智能体将为您提供专业的评审意见",-1))])]),default:(0,t.k6)(()=>[(0,t.Lk)("div",r,[(0,t.bF)(T,{title:"用例评审功能",type:"info",description:"支持上传各种格式的测试用例文件，AI将从用例完整性、覆盖度、可执行性等多个维度进行专业评审，并提供改进建议。","show-icon":"",closable:!1})]),(0,t.Lk)("div",d,[l[12]||(l[12]=(0,t.Lk)("h3",null,"选择AI服务",-1)),(0,t.bF)(S,{modelValue:y.selectedApi,"onUpdate:modelValue":l[0]||(l[0]=e=>y.selectedApi=e),class:"api-radio-group"},{default:(0,t.k6)(()=>[(0,t.bF)(W,{label:"cybotstar"},{default:(0,t.k6)(()=>l[8]||(l[8]=[(0,t.eW)("Cybotstar AI",-1)])),_:1,__:[8]}),(0,t.bF)(W,{label:"deepseek"},{default:(0,t.k6)(()=>l[9]||(l[9]=[(0,t.eW)("DeepSeek AI",-1)])),_:1,__:[9]})]),_:1},8,["modelValue"]),(0,t.Lk)("div",u,["cybotstar"===y.selectedApi?((0,t.uX)(),(0,t.CE)("span",i,[(0,t.bF)(x,null,{default:(0,t.k6)(()=>[(0,t.bF)(V)]),_:1}),l[10]||(l[10]=(0,t.eW)(" 使用Cybotstar AI进行用例评审，专业的测试用例分析能力 ",-1))])):(0,t.Q3)("",!0),"deepseek"===y.selectedApi?((0,t.uX)(),(0,t.CE)("span",c,[(0,t.bF)(x,null,{default:(0,t.k6)(()=>[(0,t.bF)(A)]),_:1}),l[11]||(l[11]=(0,t.eW)(" 使用DeepSeek AI进行用例评审，强大的逻辑分析和建议能力 ",-1))])):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",p,[l[15]||(l[15]=(0,t.Lk)("h3",null,"上传测试用例文件",-1)),l[16]||(l[16]=(0,t.Lk)("div",{class:"upload-tip"},[(0,t.Lk)("p",null,"支持多种格式的测试用例文件，包括Excel、XMind、Word、文本等格式")],-1)),(0,t.bF)(I,{ref:"uploadRef",class:"upload-demo",drag:"","auto-upload":!1,"on-change":y.handleFileChange,"on-remove":y.handleFileRemove,"file-list":y.fileList,accept:".txt,.md,.docx,.doc,.pdf,.xlsx,.xls,.xmind,.json,.xml,.csv",limit:1},{default:(0,t.k6)(()=>[(0,t.bF)(x,{class:"el-icon--upload"},{default:(0,t.k6)(()=>[(0,t.bF)(D)]),_:1}),l[13]||(l[13]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)(" 将测试用例文件拖到此处，或"),(0,t.Lk)("em",null,"点击上传")],-1)),l[14]||(l[14]=(0,t.Lk)("div",{class:"el-upload__tip"}," 支持 .txt, .md, .docx, .doc, .pdf, .xlsx, .xls, .xmind, .json, .xml, .csv 格式 ",-1))]),_:1,__:[13,14]},8,["on-change","on-remove","file-list"])]),y.fileList.length>0?((0,t.uX)(),(0,t.CE)("div",v,[l[24]||(l[24]=(0,t.Lk)("h3",null,"评审配置",-1)),(0,t.bF)(z,{model:y.reviewForm,"label-width":"120px"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{gutter:20},{default:(0,t.k6)(()=>[(0,t.bF)(E,{span:12},{default:(0,t.k6)(()=>[(0,t.bF)(X,{label:"评审维度"},{default:(0,t.k6)(()=>[(0,t.bF)(U,{modelValue:y.reviewForm.dimensions,"onUpdate:modelValue":l[1]||(l[1]=e=>y.reviewForm.dimensions=e)},{default:(0,t.k6)(()=>[(0,t.bF)(K,{label:"completeness"},{default:(0,t.k6)(()=>l[17]||(l[17]=[(0,t.eW)("完整性",-1)])),_:1,__:[17]}),(0,t.bF)(K,{label:"coverage"},{default:(0,t.k6)(()=>l[18]||(l[18]=[(0,t.eW)("覆盖度",-1)])),_:1,__:[18]}),(0,t.bF)(K,{label:"executability"},{default:(0,t.k6)(()=>l[19]||(l[19]=[(0,t.eW)("可执行性",-1)])),_:1,__:[19]}),(0,t.bF)(K,{label:"clarity"},{default:(0,t.k6)(()=>l[20]||(l[20]=[(0,t.eW)("清晰度",-1)])),_:1,__:[20]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(E,{span:12},{default:(0,t.k6)(()=>[(0,t.bF)(X,{label:"评审深度"},{default:(0,t.k6)(()=>[(0,t.bF)(S,{modelValue:y.reviewForm.depth,"onUpdate:modelValue":l[2]||(l[2]=e=>y.reviewForm.depth=e)},{default:(0,t.k6)(()=>[(0,t.bF)(Q,{label:"basic"},{default:(0,t.k6)(()=>l[21]||(l[21]=[(0,t.eW)("基础评审",-1)])),_:1,__:[21]}),(0,t.bF)(Q,{label:"detailed"},{default:(0,t.k6)(()=>l[22]||(l[22]=[(0,t.eW)("详细评审",-1)])),_:1,__:[22]}),(0,t.bF)(Q,{label:"comprehensive"},{default:(0,t.k6)(()=>l[23]||(l[23]=[(0,t.eW)("全面评审",-1)])),_:1,__:[23]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,t.bF)(X,{label:"特殊要求"},{default:(0,t.k6)(()=>[(0,t.bF)(M,{modelValue:y.reviewForm.requirements,"onUpdate:modelValue":l[3]||(l[3]=e=>y.reviewForm.requirements=e),type:"textarea",rows:3,placeholder:"请输入特殊的评审要求或关注点（可选）"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):(0,t.Q3)("",!0),y.fileList.length>0?((0,t.uX)(),(0,t.CE)("div",g,[(0,t.bF)(N,{type:"primary",size:"large",loading:y.loading,onClick:y.startReview,class:"review-btn"},{default:(0,t.k6)(()=>[y.loading?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(x,{key:0},{default:(0,t.k6)(()=>[(0,t.bF)(H)]),_:1})),(0,t.eW)(" "+(0,s.v_)(y.loading?"评审中...":"开始评审"),1)]),_:1},8,["loading","onClick"])])):(0,t.Q3)("",!0),y.showProgress?((0,t.uX)(),(0,t.Wv)(j,{key:2,class:"progress-card",shadow:"hover"},{header:(0,t.k6)(()=>l[25]||(l[25]=[(0,t.Lk)("div",{class:"card-header"},[(0,t.Lk)("h3",null,"评审进度")],-1)])),default:(0,t.k6)(()=>[(0,t.Lk)("div",b,[(0,t.bF)(P,{percentage:y.progress,status:y.progressStatus},null,8,["percentage","status"]),(0,t.Lk)("p",k,(0,s.v_)(y.progressText),1)])]),_:1})):(0,t.Q3)("",!0),y.reviewResult?((0,t.uX)(),(0,t.Wv)(j,{key:3,class:"result-card",shadow:"hover"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",m,[l[28]||(l[28]=(0,t.Lk)("h3",null,"评审结果",-1)),(0,t.Lk)("div",_,[(0,t.bF)(N,{type:"success",size:"small",onClick:y.downloadResult,disabled:!y.downloadUrl},{default:(0,t.k6)(()=>[(0,t.bF)(x,null,{default:(0,t.k6)(()=>[(0,t.bF)($)]),_:1}),l[26]||(l[26]=(0,t.eW)(" 下载报告 ",-1))]),_:1,__:[26]},8,["onClick","disabled"]),(0,t.bF)(N,{type:"primary",size:"small",onClick:y.copyToClipboard},{default:(0,t.k6)(()=>[(0,t.bF)(x,null,{default:(0,t.k6)(()=>[(0,t.bF)(J)]),_:1}),l[27]||(l[27]=(0,t.eW)(" 复制结果 ",-1))]),_:1,__:[27]},8,["onClick"])])])]),default:(0,t.k6)(()=>[(0,t.Lk)("div",f,[(0,t.bF)(ee,{modelValue:y.activeTab,"onUpdate:modelValue":l[5]||(l[5]=e=>y.activeTab=e),type:"border-card"},{default:(0,t.k6)(()=>[(0,t.bF)(Z,{label:"评审总结",name:"summary"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",w,[(0,t.bF)(Y,{column:2,border:""},{default:(0,t.k6)(()=>[(0,t.bF)(B,{label:"总体评分"},{default:(0,t.k6)(()=>[(0,t.bF)(O,{modelValue:y.reviewResult.overallScore,"onUpdate:modelValue":l[4]||(l[4]=e=>y.reviewResult.overallScore=e),disabled:"","show-score":""},null,8,["modelValue"])]),_:1}),(0,t.bF)(B,{label:"评审时间"},{default:(0,t.k6)(()=>[(0,t.eW)((0,s.v_)(y.formatTime(y.reviewResult.reviewTime)),1)]),_:1}),(0,t.bF)(B,{label:"用例总数"},{default:(0,t.k6)(()=>[(0,t.eW)((0,s.v_)(y.reviewResult.totalCases||"N/A"),1)]),_:1}),(0,t.bF)(B,{label:"问题数量"},{default:(0,t.k6)(()=>[(0,t.bF)(G,{type:y.getIssueTagType(y.reviewResult.issueCount)},{default:(0,t.k6)(()=>[(0,t.eW)((0,s.v_)(y.reviewResult.issueCount||0),1)]),_:1},8,["type"])]),_:1})]),_:1})])]),_:1}),(0,t.bF)(Z,{label:"详细评审",name:"detailed"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",{class:"review-content",innerHTML:y.formatReviewContent(y.reviewResult.content)},null,8,F)]),_:1}),(0,t.bF)(Z,{label:"改进建议",name:"suggestions"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",{class:"suggestions-content",innerHTML:y.formatSuggestions(y.reviewResult.suggestions)},null,8,h)]),_:1})]),_:1},8,["modelValue"])])]),_:1})):(0,t.Q3)("",!0)]),_:1})])}var C=a(953),L=a(163),R=a(8548),x=a(4335),T={name:"TestCaseReview",components:{Document:R.Document,Star:R.Star,Cpu:R.Cpu,UploadFilled:R.UploadFilled,Search:R.Search,Download:R.Download,CopyDocument:R.CopyDocument},setup(){const e=(0,C.KR)("cybotstar"),l=(0,C.KR)([]),a=(0,C.KR)(!1),t=(0,C.KR)(!1),s=(0,C.KR)(0),n=(0,C.KR)(""),o=(0,C.KR)(""),r=(0,C.KR)(null),d=(0,C.KR)(""),u=(0,C.KR)("summary"),i=(0,C.Kh)({dimensions:["completeness","coverage","executability","clarity"],depth:"detailed",requirements:""}),c=(0,C.KR)(null),p=e=>{l.value=[e]},v=()=>{l.value=[]},g=async()=>{if(0!==l.value.length){a.value=!0,t.value=!0,s.value=0,n.value="active",o.value="正在上传文件...";try{const a=new FormData;a.append("file",l.value[0].raw),a.append("apiProvider",e.value),a.append("dimensions",JSON.stringify(i.dimensions)),a.append("depth",i.depth),a.append("requirements",i.requirements);const t=setInterval(()=>{s.value<90&&(s.value+=10,30===s.value?o.value="正在解析文件内容...":60===s.value?o.value="正在进行AI评审...":90===s.value&&(o.value="正在生成评审报告..."))},500),u=await x.A.post("/api/review-test-cases",a,{headers:{"Content-Type":"multipart/form-data"}});if(clearInterval(t),s.value=100,n.value="success",o.value="评审完成！",!u.data.success)throw new Error(u.data.error||"评审失败");r.value={content:u.data.content,overallScore:u.data.overallScore||4,reviewTime:new Date,totalCases:u.data.totalCases,issueCount:u.data.issueCount,suggestions:u.data.suggestions},d.value=u.data.downloadUrl,L.nk.success("用例评审完成")}catch(u){console.error("评审失败:",u),s.value=100,n.value="exception",o.value="评审失败",L.nk.error(u.message||"评审失败，请稍后重试"),r.value={content:"# 测试用例评审报告\n\n## 总体评价\n\n本次评审的测试用例整体质量良好，但仍有改进空间。\n\n## 详细分析\n\n### 1. 完整性分析\n- ✅ 测试用例覆盖了主要功能点\n- ⚠️ 部分边界条件测试用例缺失\n- ❌ 异常处理测试用例不够充分\n\n### 2. 可执行性分析\n- ✅ 测试步骤描述清晰\n- ✅ 预期结果明确\n- ⚠️ 部分前置条件描述不够详细\n\n### 3. 覆盖度分析\n- ✅ 功能覆盖度: 85%\n- ⚠️ 边界值覆盖度: 60%\n- ❌ 异常场景覆盖度: 40%\n\n*注意：由于网络问题，当前显示模拟评审结果。*",overallScore:3.5,reviewTime:new Date,totalCases:25,issueCount:8,suggestions:"## 改进建议\n\n1. **增加边界值测试**\n   - 建议添加最大值、最小值、临界值的测试用例\n   - 特别关注数值型输入的边界情况\n\n2. **完善异常处理测试**\n   - 增加非法输入的测试用例\n   - 添加系统异常情况的处理验证\n\n3. **优化测试步骤描述**\n   - 使测试步骤更加具体和可操作\n   - 明确每个步骤的预期结果\n\n4. **补充前置条件**\n   - 详细描述测试环境要求\n   - 明确测试数据准备步骤"}}finally{a.value=!1,setTimeout(()=>{t.value=!1},2e3)}}else L.nk.warning("请先上传测试用例文件")},b=()=>{d.value?window.open(d.value,"_blank"):L.nk.warning("暂无可下载的文件")},k=async()=>{if(r.value)try{const e=r.value.content+"\n\n"+r.value.suggestions;await navigator.clipboard.writeText(e),L.nk.success("评审结果已复制到剪贴板")}catch(e){L.nk.error("复制失败，请手动复制")}},m=e=>e?new Date(e).toLocaleString("zh-CN"):"N/A",_=e=>e?e.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"):"",f=e=>e?e.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"):"",w=e=>0===e?"success":e<=5?"warning":"danger";return{selectedApi:e,fileList:l,loading:a,showProgress:t,progress:s,progressStatus:n,progressText:o,reviewResult:r,downloadUrl:d,activeTab:u,reviewForm:i,uploadRef:c,handleFileChange:p,handleFileRemove:v,startReview:g,downloadResult:b,copyToClipboard:k,formatTime:m,formatReviewContent:_,formatSuggestions:f,getIssueTagType:w}}},W=a(6262);const S=(0,W.A)(T,[["render",y],["__scopeId","data-v-4e9b8642"]]);var V=S}}]);
//# sourceMappingURL=727.4b1c3561.js.map