"use strict";(self["webpackChunktest_case_generator_client"]=self["webpackChunktest_case_generator_client"]||[]).push([[718],{6718:function(e,l,t){t.r(l),t.d(l,{default:function(){return A}});var a=t(641),s=t(33);const o={class:"distributed-generator"},d={class:"card-header"},r={class:"feature-description"},n={class:"api-selection"},i={class:"api-description"},u={key:0,class:"api-desc"},c={key:1,class:"api-desc"},p={class:"input-mode-selection"},k={class:"input-section"},b={key:0,class:"text-input-area"},h={key:1,class:"file-upload-area"},m={class:"distribution-config"},g={class:"action-section"},f={class:"card-header"},v={class:"progress-content"},_={class:"progress-details"},y={class:"module-list"},F={class:"card-header"},w={class:"header-actions"},x={class:"result-content"};function L(e,l,t,L,C,M){const T=(0,a.g2)("Share"),U=(0,a.g2)("el-icon"),V=(0,a.g2)("el-alert"),W=(0,a.g2)("el-radio-button"),A=(0,a.g2)("el-radio-group"),I=(0,a.g2)("Star"),S=(0,a.g2)("Cpu"),P=(0,a.g2)("el-input"),R=(0,a.g2)("upload-filled"),X=(0,a.g2)("el-upload"),E=(0,a.g2)("el-option"),D=(0,a.g2)("el-select"),Q=(0,a.g2)("el-form-item"),j=(0,a.g2)("el-col"),z=(0,a.g2)("el-input-number"),G=(0,a.g2)("el-row"),$=(0,a.g2)("el-button"),B=(0,a.g2)("el-card"),K=(0,a.g2)("Timer"),O=(0,a.g2)("el-progress"),q=(0,a.g2)("el-tag"),H=(0,a.g2)("Download"),J=(0,a.g2)("DocumentCopy"),N=(0,a.g2)("el-tab-pane"),Y=(0,a.g2)("el-tabs");return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(B,{class:"main-card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",d,[l[6]||(l[6]=(0,a.Lk)("span",null,"分布生成测试用例",-1)),(0,a.bF)(U,null,{default:(0,a.k6)(()=>[(0,a.bF)(T)]),_:1})])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",r,[(0,a.bF)(V,{title:"分布生成功能",type:"info",description:"将大型需求文档拆分成多个小模块，分别生成测试用例，最后合并成完整的测试用例集。适用于复杂系统的测试用例生成。","show-icon":"",closable:!1})]),(0,a.Lk)("div",n,[l[11]||(l[11]=(0,a.Lk)("h3",null,"选择AI服务",-1)),(0,a.bF)(A,{modelValue:C.selectedApi,"onUpdate:modelValue":l[0]||(l[0]=e=>C.selectedApi=e),class:"api-radio-group"},{default:(0,a.k6)(()=>[(0,a.bF)(W,{label:"cybotstar"},{default:(0,a.k6)(()=>l[7]||(l[7]=[(0,a.eW)("Cybotstar AI",-1)])),_:1,__:[7]}),(0,a.bF)(W,{label:"deepseek"},{default:(0,a.k6)(()=>l[8]||(l[8]=[(0,a.eW)("DeepSeek AI",-1)])),_:1,__:[8]})]),_:1},8,["modelValue"]),(0,a.Lk)("div",i,["cybotstar"===C.selectedApi?((0,a.uX)(),(0,a.CE)("span",u,[(0,a.bF)(U,null,{default:(0,a.k6)(()=>[(0,a.bF)(I)]),_:1}),l[9]||(l[9]=(0,a.eW)(" Cybotstar AI - 专业的测试用例生成服务 ",-1))])):(0,a.Q3)("",!0),"deepseek"===C.selectedApi?((0,a.uX)(),(0,a.CE)("span",c,[(0,a.bF)(U,null,{default:(0,a.k6)(()=>[(0,a.bF)(S)]),_:1}),l[10]||(l[10]=(0,a.eW)(" DeepSeek AI - 强大的代码理解和生成能力 ",-1))])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",p,[l[14]||(l[14]=(0,a.Lk)("h3",null,"选择输入方式",-1)),(0,a.bF)(A,{modelValue:C.inputMode,"onUpdate:modelValue":l[1]||(l[1]=e=>C.inputMode=e),class:"mode-radio-group"},{default:(0,a.k6)(()=>[(0,a.bF)(W,{label:"text"},{default:(0,a.k6)(()=>l[12]||(l[12]=[(0,a.eW)("文本输入",-1)])),_:1,__:[12]}),(0,a.bF)(W,{label:"file"},{default:(0,a.k6)(()=>l[13]||(l[13]=[(0,a.eW)("文件上传",-1)])),_:1,__:[13]})]),_:1},8,["modelValue"])]),(0,a.Lk)("div",k,["text"===C.inputMode?((0,a.uX)(),(0,a.CE)("div",b,[l[15]||(l[15]=(0,a.Lk)("div",{class:"input-header"},[(0,a.Lk)("h3",null,"需求文档内容"),(0,a.Lk)("p",{class:"input-tip"},"请输入完整的需求文档，系统将自动拆分成多个模块进行分布生成")],-1)),(0,a.bF)(P,{modelValue:C.textInput,"onUpdate:modelValue":l[2]||(l[2]=e=>C.textInput=e),type:"textarea",rows:12,placeholder:"请输入完整的需求文档内容...\\n\\n系统将自动识别并拆分成以下模块：\\n- 用户管理模块\\n- 权限管理模块\\n- 数据管理模块\\n- 系统配置模块\\n等等...",class:"text-input"},null,8,["modelValue"])])):(0,a.Q3)("",!0),"file"===C.inputMode?((0,a.uX)(),(0,a.CE)("div",h,[l[18]||(l[18]=(0,a.Lk)("div",{class:"input-header"},[(0,a.Lk)("h3",null,"文件上传"),(0,a.Lk)("p",{class:"input-tip"},"上传需求文档，支持多种格式，系统将自动解析并分布生成")],-1)),(0,a.bF)(X,{ref:"uploadRef",class:"upload-demo",drag:"","auto-upload":!1,"on-change":M.handleFileChange,"on-remove":M.handleFileRemove,"file-list":C.fileList,accept:".txt,.md,.docx,.doc,.pdf,.xlsx,.xls,.json,.xml,.csv",limit:1},{tip:(0,a.k6)(()=>l[16]||(l[16]=[(0,a.Lk)("div",{class:"el-upload__tip"}," 支持格式：.txt, .md, .docx, .doc, .pdf, .xlsx, .xls, .json, .xml, .csv（最大10MB） ",-1)])),default:(0,a.k6)(()=>[(0,a.bF)(U,{class:"el-icon--upload"},{default:(0,a.k6)(()=>[(0,a.bF)(R)]),_:1}),l[17]||(l[17]=(0,a.Lk)("div",{class:"el-upload__text"},[(0,a.eW)(" 将文件拖到此处，或"),(0,a.Lk)("em",null,"点击上传")],-1))]),_:1,__:[17]},8,["on-change","on-remove","file-list"])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",m,[l[19]||(l[19]=(0,a.Lk)("h3",null,"分布配置",-1)),(0,a.bF)(G,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(j,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(Q,{label:"拆分策略"},{default:(0,a.k6)(()=>[(0,a.bF)(D,{modelValue:C.splitStrategy,"onUpdate:modelValue":l[3]||(l[3]=e=>C.splitStrategy=e),placeholder:"请选择拆分策略"},{default:(0,a.k6)(()=>[(0,a.bF)(E,{label:"按功能模块拆分",value:"module"}),(0,a.bF)(E,{label:"按页面拆分",value:"page"}),(0,a.bF)(E,{label:"按业务流程拆分",value:"process"}),(0,a.bF)(E,{label:"智能自动拆分",value:"auto"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,a.bF)(j,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(Q,{label:"并发数量"},{default:(0,a.k6)(()=>[(0,a.bF)(z,{modelValue:C.concurrency,"onUpdate:modelValue":l[4]||(l[4]=e=>C.concurrency=e),min:1,max:10},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),(0,a.Lk)("div",g,[(0,a.bF)($,{type:"primary",size:"large",loading:C.loading,onClick:M.generateDistributedTestCases,disabled:!M.canGenerate,class:"generate-btn"},{default:(0,a.k6)(()=>[C.loading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(U,{key:0},{default:(0,a.k6)(()=>[(0,a.bF)(T)]),_:1})),(0,a.eW)(" "+(0,s.v_)(C.loading?"分布生成中...":"开始分布生成测试用例"),1)]),_:1},8,["loading","onClick","disabled"])])]),_:1}),C.showProgress?((0,a.uX)(),(0,a.Wv)(B,{key:0,class:"progress-card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",f,[l[20]||(l[20]=(0,a.Lk)("span",null,"生成进度",-1)),(0,a.bF)(U,null,{default:(0,a.k6)(()=>[(0,a.bF)(K)]),_:1})])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",v,[(0,a.bF)(O,{percentage:C.overallProgress,status:C.progressStatus},null,8,["percentage","status"]),(0,a.Lk)("div",_,[(0,a.Lk)("p",null,"总体进度: "+(0,s.v_)(C.completedModules)+"/"+(0,s.v_)(C.totalModules)+" 个模块已完成",1),(0,a.Lk)("div",y,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(C.modules,(e,l)=>((0,a.uX)(),(0,a.Wv)(q,{key:l,type:M.getModuleTagType(e.status),class:"module-tag"},{default:(0,a.k6)(()=>[(0,a.eW)((0,s.v_)(e.name)+" - "+(0,s.v_)(e.status),1)]),_:2},1032,["type"]))),128))])])])]),_:1})):(0,a.Q3)("",!0),C.result?((0,a.uX)(),(0,a.Wv)(B,{key:1,class:"result-card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",F,[l[23]||(l[23]=(0,a.Lk)("span",null,"分布生成结果",-1)),(0,a.Lk)("div",w,[(0,a.bF)($,{type:"success",size:"small",onClick:M.downloadResult,disabled:!C.downloadUrl},{default:(0,a.k6)(()=>[(0,a.bF)(U,null,{default:(0,a.k6)(()=>[(0,a.bF)(H)]),_:1}),l[21]||(l[21]=(0,a.eW)(" 下载合并文件 ",-1))]),_:1,__:[21]},8,["onClick","disabled"]),(0,a.bF)($,{size:"small",onClick:M.copyToClipboard},{default:(0,a.k6)(()=>[(0,a.bF)(U,null,{default:(0,a.k6)(()=>[(0,a.bF)(J)]),_:1}),l[22]||(l[22]=(0,a.eW)(" 复制内容 ",-1))]),_:1,__:[22]},8,["onClick"])])])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",x,[(0,a.bF)(Y,{modelValue:C.activeTab,"onUpdate:modelValue":l[5]||(l[5]=e=>C.activeTab=e),type:"border-card"},{default:(0,a.k6)(()=>[(0,a.bF)(N,{label:"合并结果",name:"merged"},{default:(0,a.k6)(()=>[(0,a.Lk)("pre",null,(0,s.v_)(C.result),1)]),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(C.moduleResults,(e,l)=>((0,a.uX)(),(0,a.Wv)(N,{key:l,label:e.name,name:`module-${l}`},{default:(0,a.k6)(()=>[(0,a.Lk)("pre",null,(0,s.v_)(e.content),1)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])]),_:1})):(0,a.Q3)("",!0)])}var C=t(4335),M=t(163),T=t(8548),U={name:"DistributedGenerator",components:{UploadFilled:T.UploadFilled},data(){return{textInput:"",loading:!1,result:"",downloadUrl:"",selectedApi:"cybotstar",inputMode:"text",fileList:[],uploadedFile:null,splitStrategy:"auto",concurrency:3,showProgress:!1,overallProgress:0,progressStatus:"",completedModules:0,totalModules:0,modules:[],moduleResults:[],activeTab:"merged"}},computed:{canGenerate(){return"text"===this.inputMode?this.textInput.trim().length>0&&this.selectedApi:this.uploadedFile&&this.selectedApi}},methods:{async generateDistributedTestCases(){if(this.canGenerate){this.loading=!0,this.result="",this.downloadUrl="",this.showProgress=!0,this.overallProgress=0,this.progressStatus="active",this.moduleResults=[],this.completedModules=0,this.totalModules=0,this.modules=[];try{const e=new FormData;e.append("apiProvider",this.selectedApi),e.append("splitStrategy",this.splitStrategy),e.append("concurrency",this.concurrency),"file"===this.inputMode&&this.uploadedFile?e.append("file",this.uploadedFile):e.append("content",this.textInput);const l=setInterval(()=>{this.overallProgress<90&&(this.overallProgress+=10*Math.random())},500),t=await C.A.post("/api/generate-distributed",e,{headers:{"Content-Type":"multipart/form-data"}});if(clearInterval(l),this.overallProgress=100,!t.data.success)throw new Error(t.data.error||"生成失败");this.result=t.data.content,this.downloadUrl=t.data.downloadUrl,this.moduleResults=t.data.results||[],this.totalModules=t.data.totalParts||0,this.completedModules=this.totalModules,this.progressStatus="success",M.nk.success(`分布生成完成！共处理 ${t.data.totalParts} 个分片，使用 ${t.data.strategy} 策略`)}catch(e){console.error("生成失败:",e),this.progressStatus="exception",this.overallProgress=0,M.nk.error(e.response?.data?.error||e.message||"分布生成测试用例失败，请稍后重试")}finally{this.loading=!1}}},handleFileChange(e){const l=e.size/1024/1024<10;if(!l)return M.nk.error("文件大小不能超过 10MB!"),!1;const t=[".txt",".md",".docx",".doc",".pdf",".xlsx",".xls",".json",".xml",".csv"],a=e.name.toLowerCase(),s=t.some(e=>a.endsWith(e));if(!s)return M.nk.error("不支持的文件格式！"),!1;this.uploadedFile=e.raw,M.nk.success("文件上传成功！")},handleFileRemove(){this.uploadedFile=null,this.fileList=[]},getModuleTagType(e){switch(e){case"已完成":return"success";case"进行中":return"warning";case"等待中":return"info";case"失败":return"danger";default:return"info"}},async downloadResult(){if(this.downloadUrl)try{const e=await C.A.get(this.downloadUrl,{responseType:"blob"}),l=new Blob([e.data],{type:"application/octet-stream"}),t=window.URL.createObjectURL(l),a=document.createElement("a");a.href=t,a.download=`distributed-test-cases-${(new Date).getTime()}.xmind`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t),M.nk.success("文件下载成功！")}catch(e){console.error("下载失败:",e),M.nk.error("文件下载失败")}},async copyToClipboard(){try{navigator.clipboard&&window.isSecureContext?(await navigator.clipboard.writeText(this.result),M.nk.success("内容已复制到剪贴板！")):this.fallbackCopyToClipboard(this.result)}catch(e){console.error("复制失败:",e);try{this.fallbackCopyToClipboard(this.result)}catch(l){console.error("降级复制也失败:",l),M.nk.error("复制失败，请手动选择文本复制")}}},fallbackCopyToClipboard(e){const l=document.createElement("textarea");l.value=e,l.style.position="fixed",l.style.left="-999999px",l.style.top="-999999px",document.body.appendChild(l),l.focus(),l.select();try{const e=document.execCommand("copy");if(!e)throw new Error("execCommand failed");M.nk.success("内容已复制到剪贴板！")}finally{document.body.removeChild(l)}}}},V=t(6262);const W=(0,V.A)(U,[["render",L],["__scopeId","data-v-5f92854a"]]);var A=W}}]);
//# sourceMappingURL=718.9a8febbb.js.map