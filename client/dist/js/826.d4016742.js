"use strict";(self["webpackChunktest_case_generator_client"]=self["webpackChunktest_case_generator_client"]||[]).push([[826],{6826:function(e,t,l){l.r(t),l.d(t,{default:function(){return L}});var a=l(641),o=l(33);const s={class:"home"},d={class:"card-header"},n={class:"api-selection"},i={class:"api-description"},r={key:0,class:"api-desc"},c={key:1,class:"api-desc"},u={class:"input-mode-selection"},p={class:"input-section"},k={key:0,class:"text-input-area"},h={key:1,class:"file-upload-area"},b={class:"action-section"},m={class:"card-header"},f={class:"header-actions"},_={class:"result-content"};function g(e,t,l,g,y,v){const x=(0,a.g2)("DocumentAdd"),C=(0,a.g2)("el-icon"),F=(0,a.g2)("el-radio-button"),w=(0,a.g2)("el-radio-group"),L=(0,a.g2)("Star"),A=(0,a.g2)("Cpu"),U=(0,a.g2)("el-input"),W=(0,a.g2)("upload-filled"),T=(0,a.g2)("el-upload"),I=(0,a.g2)("Magic"),M=(0,a.g2)("el-button"),E=(0,a.g2)("el-card"),R=(0,a.g2)("Download"),V=(0,a.g2)("DocumentCopy");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(E,{class:"main-card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",d,[t[3]||(t[3]=(0,a.Lk)("span",null,"测试用例生成器",-1)),(0,a.bF)(C,null,{default:(0,a.k6)(()=>[(0,a.bF)(x)]),_:1})])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",n,[t[8]||(t[8]=(0,a.Lk)("h3",null,"选择AI服务",-1)),(0,a.bF)(w,{modelValue:y.selectedApi,"onUpdate:modelValue":t[0]||(t[0]=e=>y.selectedApi=e),class:"api-radio-group"},{default:(0,a.k6)(()=>[(0,a.bF)(F,{label:"cybotstar"},{default:(0,a.k6)(()=>t[4]||(t[4]=[(0,a.eW)("Cybotstar AI",-1)])),_:1,__:[4]}),(0,a.bF)(F,{label:"deepseek"},{default:(0,a.k6)(()=>t[5]||(t[5]=[(0,a.eW)("DeepSeek AI",-1)])),_:1,__:[5]})]),_:1},8,["modelValue"]),(0,a.Lk)("div",i,["cybotstar"===y.selectedApi?((0,a.uX)(),(0,a.CE)("span",r,[(0,a.bF)(C,null,{default:(0,a.k6)(()=>[(0,a.bF)(L)]),_:1}),t[6]||(t[6]=(0,a.eW)(" Cybotstar AI - 专业的测试用例生成服务 ",-1))])):(0,a.Q3)("",!0),"deepseek"===y.selectedApi?((0,a.uX)(),(0,a.CE)("span",c,[(0,a.bF)(C,null,{default:(0,a.k6)(()=>[(0,a.bF)(A)]),_:1}),t[7]||(t[7]=(0,a.eW)(" DeepSeek AI - 强大的代码理解和生成能力 ",-1))])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",u,[t[11]||(t[11]=(0,a.Lk)("h3",null,"选择输入方式",-1)),(0,a.bF)(w,{modelValue:y.inputMode,"onUpdate:modelValue":t[1]||(t[1]=e=>y.inputMode=e),class:"mode-radio-group"},{default:(0,a.k6)(()=>[(0,a.bF)(F,{label:"text"},{default:(0,a.k6)(()=>t[9]||(t[9]=[(0,a.eW)("文本输入",-1)])),_:1,__:[9]}),(0,a.bF)(F,{label:"file"},{default:(0,a.k6)(()=>t[10]||(t[10]=[(0,a.eW)("文件上传",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"])]),(0,a.Lk)("div",p,["text"===y.inputMode?((0,a.uX)(),(0,a.CE)("div",k,[t[12]||(t[12]=(0,a.Lk)("div",{class:"input-header"},[(0,a.Lk)("h3",null,"文本输入")],-1)),(0,a.bF)(U,{modelValue:y.textInput,"onUpdate:modelValue":t[2]||(t[2]=e=>y.textInput=e),type:"textarea",rows:10,placeholder:"请输入需要生成测试用例的需求描述或功能说明...\\n\\n例如：\\n- 输入框只能输入1-10的数字\\n- 用户登录功能验证\\n- 购物车添加商品功能",class:"text-input"},null,8,["modelValue"])])):(0,a.Q3)("",!0),"file"===y.inputMode?((0,a.uX)(),(0,a.CE)("div",h,[t[15]||(t[15]=(0,a.Lk)("div",{class:"input-header"},[(0,a.Lk)("h3",null,"文件上传")],-1)),(0,a.bF)(T,{ref:"uploadRef",class:"upload-demo",drag:"","auto-upload":!1,"on-change":v.handleFileChange,"on-remove":v.handleFileRemove,"file-list":y.fileList,accept:".txt,.md,.docx,.doc,.pdf,.xlsx,.xls,.json,.xml,.csv",limit:1},{tip:(0,a.k6)(()=>t[13]||(t[13]=[(0,a.Lk)("div",{class:"el-upload__tip"}," 支持格式：.txt, .md, .docx, .doc, .pdf, .xlsx, .xls, .json, .xml, .csv（最大10MB） ",-1)])),default:(0,a.k6)(()=>[(0,a.bF)(C,{class:"el-icon--upload"},{default:(0,a.k6)(()=>[(0,a.bF)(W)]),_:1}),t[14]||(t[14]=(0,a.Lk)("div",{class:"el-upload__text"},[(0,a.eW)(" 将文件拖到此处，或"),(0,a.Lk)("em",null,"点击上传")],-1))]),_:1,__:[14]},8,["on-change","on-remove","file-list"])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",b,[(0,a.bF)(M,{type:"primary",size:"large",loading:y.loading,onClick:v.generateTestCases,disabled:!v.canGenerate,class:"generate-btn"},{default:(0,a.k6)(()=>[y.loading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(C,{key:0},{default:(0,a.k6)(()=>[(0,a.bF)(I)]),_:1})),(0,a.eW)(" "+(0,o.v_)(y.loading?"生成中...":"开始生成测试用例"),1)]),_:1},8,["loading","onClick","disabled"])])]),_:1}),y.result?((0,a.uX)(),(0,a.Wv)(E,{key:0,class:"result-card",shadow:"hover"},{header:(0,a.k6)(()=>[(0,a.Lk)("div",m,[t[18]||(t[18]=(0,a.Lk)("span",null,"生成结果",-1)),(0,a.Lk)("div",f,[(0,a.bF)(M,{type:"success",size:"small",onClick:v.downloadResult,disabled:!y.downloadUrl},{default:(0,a.k6)(()=>[(0,a.bF)(C,null,{default:(0,a.k6)(()=>[(0,a.bF)(R)]),_:1}),t[16]||(t[16]=(0,a.eW)(" 下载文件 ",-1))]),_:1,__:[16]},8,["onClick","disabled"]),(0,a.bF)(M,{size:"small",onClick:v.copyToClipboard},{default:(0,a.k6)(()=>[(0,a.bF)(C,null,{default:(0,a.k6)(()=>[(0,a.bF)(V)]),_:1}),t[17]||(t[17]=(0,a.eW)(" 复制内容 ",-1))]),_:1,__:[17]},8,["onClick"])])])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",_,[(0,a.Lk)("pre",null,(0,o.v_)(y.result),1)])]),_:1})):(0,a.Q3)("",!0)])}var y=l(4335),v=l(163),x=l(8548),C={name:"Home",components:{UploadFilled:x.UploadFilled},data(){return{textInput:"",loading:!1,result:"",downloadUrl:"",selectedApi:"cybotstar",inputMode:"text",fileList:[],uploadedFile:null}},computed:{canGenerate(){return"text"===this.inputMode?this.textInput.trim().length>0&&this.selectedApi:this.uploadedFile&&this.selectedApi}},methods:{async generateTestCases(){this.loading=!0,this.result="",this.downloadUrl="";try{let e;if("text"===this.inputMode)e=await y.A.post("/api/generate",{content:this.textInput,apiProvider:this.selectedApi},{headers:{"Content-Type":"application/json"}});else{const t=new FormData;t.append("file",this.uploadedFile),t.append("apiProvider",this.selectedApi),e=await y.A.post("/api/generate",t,{headers:{"Content-Type":"multipart/form-data"}})}if(!e.data.success)throw new Error(e.data.error||"生成失败");this.result=e.data.content,this.downloadUrl=e.data.downloadUrl,v.nk.success("测试用例生成成功！")}catch(e){console.error("生成失败:",e),v.nk.error(e.response?.data?.error||"生成测试用例失败，请稍后重试")}finally{this.loading=!1}},handleFileChange(e){const t=e.size/1024/1024<10;if(!t)return v.nk.error("文件大小不能超过 10MB!"),!1;const l=[".txt",".md",".docx",".doc",".pdf",".xlsx",".xls",".json",".xml",".csv"],a=e.name.toLowerCase(),o=l.some(e=>a.endsWith(e));if(!o)return v.nk.error("不支持的文件格式！"),!1;this.uploadedFile=e.raw,v.nk.success("文件上传成功！")},handleFileRemove(){this.uploadedFile=null,this.fileList=[]},async downloadResult(){if(this.downloadUrl)try{const e=await y.A.get(this.downloadUrl,{responseType:"blob"}),t=new Blob([e.data],{type:"application/octet-stream"}),l=window.URL.createObjectURL(t),a=document.createElement("a");a.href=l,a.download=`test-cases-${(new Date).getTime()}.xmind`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(l),v.nk.success("文件下载成功！")}catch(e){console.error("下载失败:",e),v.nk.error("文件下载失败")}},async copyToClipboard(){try{navigator.clipboard&&window.isSecureContext?(await navigator.clipboard.writeText(this.result),v.nk.success("内容已复制到剪贴板！")):this.fallbackCopyToClipboard(this.result)}catch(e){console.error("复制失败:",e);try{this.fallbackCopyToClipboard(this.result)}catch(t){console.error("降级复制也失败:",t),v.nk.error("复制失败，请手动选择文本复制")}}},fallbackCopyToClipboard(e){const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{const e=document.execCommand("copy");if(!e)throw new Error("execCommand failed");v.nk.success("内容已复制到剪贴板！")}finally{document.body.removeChild(t)}}}},F=l(6262);const w=(0,F.A)(C,[["render",g],["__scopeId","data-v-57170702"]]);var L=w}}]);
//# sourceMappingURL=826.d4016742.js.map