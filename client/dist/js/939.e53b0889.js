"use strict";(self["webpackChunktest_case_generator_client"]=self["webpackChunktest_case_generator_client"]||[]).push([[939],{939:function(e,l,a){a.r(l),a.d(l,{default:function(){return I}});var t=a(641),s=a(33);const n={class:"test-case-review"},o={class:"card-header"},u={class:"steps-container"},r={key:0,class:"step-content"},i={class:"api-selection"},d={class:"upload-section"},c={class:"input-section"},p={class:"step-actions"},v={key:1,class:"step-content"},m={class:"upload-section"},k={class:"input-section"},b={class:"config-section"},g={class:"step-actions"},_={key:2,class:"step-content"},F={class:"restart-section"},f={key:0},h={class:"progress-content"},w={class:"progress-text"},C={class:"card-header"},R={class:"header-actions"},L={class:"result-content"},y={class:"review-summary"},x=["innerHTML"],S=["innerHTML"];function T(e,l,a,T,W,V){const q=(0,t.g2)("Document"),U=(0,t.g2)("el-icon"),K=(0,t.g2)("el-step"),D=(0,t.g2)("el-steps"),A=(0,t.g2)("Star"),I=(0,t.g2)("Cpu"),E=(0,t.g2)("el-radio-button"),X=(0,t.g2)("el-radio-group"),z=(0,t.g2)("UploadFilled"),Q=(0,t.g2)("el-upload"),M=(0,t.g2)("el-input"),P=(0,t.g2)("el-button"),H=(0,t.g2)("el-checkbox"),N=(0,t.g2)("el-checkbox-group"),B=(0,t.g2)("el-form-item"),$=(0,t.g2)("el-radio"),J=(0,t.g2)("el-form"),O=(0,t.g2)("Search"),j=(0,t.g2)("el-card"),G=(0,t.g2)("el-progress"),Y=(0,t.g2)("Download"),Z=(0,t.g2)("CopyDocument"),ee=(0,t.g2)("el-rate"),le=(0,t.g2)("el-descriptions-item"),ae=(0,t.g2)("el-tag"),te=(0,t.g2)("el-descriptions"),se=(0,t.g2)("el-tab-pane"),ne=(0,t.g2)("el-tabs");return(0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(j,{class:"main-card",shadow:"hover"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",o,[(0,t.Lk)("h2",null,[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(q)]),_:1}),l[8]||(l[8]=(0,t.eW)(" 测试用例评审",-1))]),l[9]||(l[9]=(0,t.Lk)("p",{class:"subtitle"},"分步骤进行测试用例评审，获得专业的AI评审报告",-1))])]),default:(0,t.k6)(()=>[(0,t.Lk)("div",u,[(0,t.bF)(D,{active:T.currentStep,"finish-status":"success","align-center":""},{default:(0,t.k6)(()=>[(0,t.bF)(K,{title:"需求文档",description:"上传需求文档或输入需求描述"}),(0,t.bF)(K,{title:"测试用例",description:"上传测试用例或输入测试用例"}),(0,t.bF)(K,{title:"评审结果",description:"查看AI评审报告"})]),_:1},8,["active"])]),0===T.currentStep?((0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("div",i,[(0,t.Lk)("h3",null,[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(A)]),_:1}),l[10]||(l[10]=(0,t.eW)(" 选择AI服务",-1))]),(0,t.bF)(X,{modelValue:T.selectedApi,"onUpdate:modelValue":l[0]||(l[0]=e=>T.selectedApi=e),class:"api-options"},{default:(0,t.k6)(()=>[(0,t.bF)(E,{label:"cybotstar"},{default:(0,t.k6)(()=>[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(I)]),_:1}),l[11]||(l[11]=(0,t.eW)(" Cybotstar AI ",-1))]),_:1,__:[11]}),(0,t.bF)(E,{label:"deepseek"},{default:(0,t.k6)(()=>[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(I)]),_:1}),l[12]||(l[12]=(0,t.eW)(" DeepSeek AI ",-1))]),_:1,__:[12]})]),_:1},8,["modelValue"])]),(0,t.Lk)("div",d,[(0,t.Lk)("h3",null,[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(z)]),_:1}),l[13]||(l[13]=(0,t.eW)(" 上传需求文档",-1))]),(0,t.bF)(Q,{ref:"requirementUploadRef",class:"upload-demo",drag:"","file-list":T.requirementFileList,"on-change":T.handleRequirementFileChange,"on-remove":T.handleRequirementFileRemove,"auto-upload":!1,accept:".txt,.doc,.docx,.pdf,.xls,.xlsx",limit:10},{tip:(0,t.k6)(()=>l[14]||(l[14]=[(0,t.Lk)("div",{class:"el-upload__tip"}," 支持 txt/doc/docx/pdf/xls/xlsx 格式文件，最多上传10个文件，单个文件大小不超过10MB ",-1)])),default:(0,t.k6)(()=>[(0,t.bF)(U,{class:"el-icon--upload"},{default:(0,t.k6)(()=>[(0,t.bF)(z)]),_:1}),l[15]||(l[15]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)(" 将需求文档拖到此处，或"),(0,t.Lk)("em",null,"点击上传")],-1))]),_:1,__:[15]},8,["file-list","on-change","on-remove"])]),(0,t.Lk)("div",c,[l[16]||(l[16]=(0,t.Lk)("h3",null,"或者直接输入需求描述",-1)),(0,t.bF)(M,{modelValue:T.requirementContent,"onUpdate:modelValue":l[1]||(l[1]=e=>T.requirementContent=e),type:"textarea",rows:8,placeholder:"请输入需求描述内容...","show-word-limit":"",maxlength:"10000"},null,8,["modelValue"])]),(0,t.Lk)("div",p,[(0,t.bF)(P,{type:"primary",size:"large",onClick:T.nextStep,disabled:!T.canProceedToStep2},{default:(0,t.k6)(()=>l[17]||(l[17]=[(0,t.eW)(" 下一步：上传测试用例 ",-1)])),_:1,__:[17]},8,["onClick","disabled"])])])):(0,t.Q3)("",!0),1===T.currentStep?((0,t.uX)(),(0,t.CE)("div",v,[(0,t.Lk)("div",m,[(0,t.Lk)("h3",null,[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(z)]),_:1}),l[18]||(l[18]=(0,t.eW)(" 上传测试用例",-1))]),(0,t.bF)(Q,{ref:"testCaseUploadRef",class:"upload-demo",drag:"","file-list":T.testCaseFileList,"on-change":T.handleTestCaseFileChange,"on-remove":T.handleTestCaseFileRemove,"auto-upload":!1,accept:".txt,.doc,.docx,.pdf,.xls,.xlsx",limit:10},{tip:(0,t.k6)(()=>l[19]||(l[19]=[(0,t.Lk)("div",{class:"el-upload__tip"}," 支持 txt/doc/docx/pdf/xls/xlsx 格式文件，最多上传10个文件，单个文件大小不超过10MB ",-1)])),default:(0,t.k6)(()=>[(0,t.bF)(U,{class:"el-icon--upload"},{default:(0,t.k6)(()=>[(0,t.bF)(z)]),_:1}),l[20]||(l[20]=(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)(" 将测试用例文件拖到此处，或"),(0,t.Lk)("em",null,"点击上传")],-1))]),_:1,__:[20]},8,["file-list","on-change","on-remove"])]),(0,t.Lk)("div",k,[l[21]||(l[21]=(0,t.Lk)("h3",null,"或者直接输入测试用例",-1)),(0,t.bF)(M,{modelValue:T.testCaseContent,"onUpdate:modelValue":l[2]||(l[2]=e=>T.testCaseContent=e),type:"textarea",rows:8,placeholder:"请输入测试用例内容...","show-word-limit":"",maxlength:"10000"},null,8,["modelValue"])]),(0,t.Lk)("div",b,[l[29]||(l[29]=(0,t.Lk)("h3",null,"评审配置",-1)),(0,t.bF)(J,{model:T.reviewForm,"label-width":"120px"},{default:(0,t.k6)(()=>[(0,t.bF)(B,{label:"评审维度"},{default:(0,t.k6)(()=>[(0,t.bF)(N,{modelValue:T.reviewForm.dimensions,"onUpdate:modelValue":l[3]||(l[3]=e=>T.reviewForm.dimensions=e)},{default:(0,t.k6)(()=>[(0,t.bF)(H,{label:"completeness"},{default:(0,t.k6)(()=>l[22]||(l[22]=[(0,t.eW)("完整性",-1)])),_:1,__:[22]}),(0,t.bF)(H,{label:"coverage"},{default:(0,t.k6)(()=>l[23]||(l[23]=[(0,t.eW)("覆盖度",-1)])),_:1,__:[23]}),(0,t.bF)(H,{label:"executability"},{default:(0,t.k6)(()=>l[24]||(l[24]=[(0,t.eW)("可执行性",-1)])),_:1,__:[24]}),(0,t.bF)(H,{label:"clarity"},{default:(0,t.k6)(()=>l[25]||(l[25]=[(0,t.eW)("清晰度",-1)])),_:1,__:[25]})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(B,{label:"评审深度"},{default:(0,t.k6)(()=>[(0,t.bF)(X,{modelValue:T.reviewForm.depth,"onUpdate:modelValue":l[4]||(l[4]=e=>T.reviewForm.depth=e)},{default:(0,t.k6)(()=>[(0,t.bF)($,{label:"basic"},{default:(0,t.k6)(()=>l[26]||(l[26]=[(0,t.eW)("基础评审",-1)])),_:1,__:[26]}),(0,t.bF)($,{label:"detailed"},{default:(0,t.k6)(()=>l[27]||(l[27]=[(0,t.eW)("详细评审",-1)])),_:1,__:[27]}),(0,t.bF)($,{label:"comprehensive"},{default:(0,t.k6)(()=>l[28]||(l[28]=[(0,t.eW)("全面评审",-1)])),_:1,__:[28]})]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(B,{label:"特殊要求"},{default:(0,t.k6)(()=>[(0,t.bF)(M,{modelValue:T.reviewForm.requirements,"onUpdate:modelValue":l[5]||(l[5]=e=>T.reviewForm.requirements=e),type:"textarea",rows:3,placeholder:"请输入特殊评审要求（可选）"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),(0,t.Lk)("div",g,[(0,t.bF)(P,{size:"large",onClick:T.prevStep},{default:(0,t.k6)(()=>l[30]||(l[30]=[(0,t.eW)(" 上一步 ",-1)])),_:1,__:[30]},8,["onClick"]),(0,t.bF)(P,{type:"primary",size:"large",loading:T.loading,onClick:T.startReview,disabled:!T.canStartReview},{default:(0,t.k6)(()=>[T.loading?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(U,{key:0},{default:(0,t.k6)(()=>[(0,t.bF)(O)]),_:1})),(0,t.eW)(" "+(0,s.v_)(T.loading?"评审中...":"开始评审"),1)]),_:1},8,["loading","onClick","disabled"])])])):(0,t.Q3)("",!0),2===T.currentStep?((0,t.uX)(),(0,t.CE)("div",_,[(0,t.Lk)("div",F,[(0,t.bF)(P,{onClick:T.restartReview,size:"large"},{default:(0,t.k6)(()=>l[31]||(l[31]=[(0,t.eW)(" 重新开始评审 ",-1)])),_:1,__:[31]},8,["onClick"])])])):(0,t.Q3)("",!0)]),_:1}),2===T.currentStep?((0,t.uX)(),(0,t.CE)("div",f,[T.showProgress?((0,t.uX)(),(0,t.Wv)(j,{key:0,class:"progress-card",shadow:"hover"},{header:(0,t.k6)(()=>l[32]||(l[32]=[(0,t.Lk)("div",{class:"card-header"},[(0,t.Lk)("h3",null,"评审进度")],-1)])),default:(0,t.k6)(()=>[(0,t.Lk)("div",h,[(0,t.bF)(G,{percentage:T.progress,status:T.progressStatus},null,8,["percentage","status"]),(0,t.Lk)("p",w,(0,s.v_)(T.progressText),1)])]),_:1})):(0,t.Q3)("",!0),T.reviewResult?((0,t.uX)(),(0,t.Wv)(j,{key:1,class:"result-card",shadow:"hover"},{header:(0,t.k6)(()=>[(0,t.Lk)("div",C,[l[35]||(l[35]=(0,t.Lk)("h3",null,"评审结果",-1)),(0,t.Lk)("div",R,[(0,t.bF)(P,{type:"success",size:"small",onClick:T.downloadResult,disabled:!T.downloadUrl},{default:(0,t.k6)(()=>[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(Y)]),_:1}),l[33]||(l[33]=(0,t.eW)(" 下载报告 ",-1))]),_:1,__:[33]},8,["onClick","disabled"]),(0,t.bF)(P,{type:"primary",size:"small",onClick:T.copyToClipboard},{default:(0,t.k6)(()=>[(0,t.bF)(U,null,{default:(0,t.k6)(()=>[(0,t.bF)(Z)]),_:1}),l[34]||(l[34]=(0,t.eW)(" 复制结果 ",-1))]),_:1,__:[34]},8,["onClick"])])])]),default:(0,t.k6)(()=>[(0,t.Lk)("div",L,[(0,t.bF)(ne,{modelValue:T.activeTab,"onUpdate:modelValue":l[7]||(l[7]=e=>T.activeTab=e),type:"border-card"},{default:(0,t.k6)(()=>[(0,t.bF)(se,{label:"评审总结",name:"summary"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",y,[(0,t.bF)(te,{column:2,border:""},{default:(0,t.k6)(()=>[(0,t.bF)(le,{label:"总体评分"},{default:(0,t.k6)(()=>[(0,t.bF)(ee,{modelValue:T.reviewResult.overallScore,"onUpdate:modelValue":l[6]||(l[6]=e=>T.reviewResult.overallScore=e),disabled:"","show-score":""},null,8,["modelValue"])]),_:1}),(0,t.bF)(le,{label:"评审时间"},{default:(0,t.k6)(()=>[(0,t.eW)((0,s.v_)(T.formatTime(T.reviewResult.reviewTime)),1)]),_:1}),(0,t.bF)(le,{label:"用例总数"},{default:(0,t.k6)(()=>[(0,t.eW)((0,s.v_)(T.reviewResult.totalCases||"N/A"),1)]),_:1}),(0,t.bF)(le,{label:"问题数量"},{default:(0,t.k6)(()=>[(0,t.bF)(ae,{type:T.getIssueTagType(T.reviewResult.issueCount)},{default:(0,t.k6)(()=>[(0,t.eW)((0,s.v_)(T.reviewResult.issueCount||0),1)]),_:1},8,["type"])]),_:1})]),_:1})])]),_:1}),(0,t.bF)(se,{label:"详细评审",name:"detailed"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",{class:"review-content",innerHTML:T.formatReviewContent(T.reviewResult.content)},null,8,x)]),_:1}),(0,t.bF)(se,{label:"改进建议",name:"suggestions"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",{class:"suggestions-content",innerHTML:T.formatSuggestions(T.reviewResult.suggestions)},null,8,S)]),_:1})]),_:1},8,["modelValue"])])]),_:1})):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0)])}var W=a(953),V=a(163),q=a(8548),U=a(4335),K={name:"TestCaseReview",components:{Document:q.Document,Star:q.Star,Cpu:q.Cpu,UploadFilled:q.UploadFilled,Search:q.Search,Download:q.Download,CopyDocument:q.CopyDocument},setup(){const e=(0,W.KR)("cybotstar"),l=(0,W.KR)(0),a=(0,W.KR)([]),s=(0,W.KR)([]),n=(0,W.KR)(""),o=(0,W.KR)(""),u=(0,W.KR)(!1),r=(0,W.KR)(!1),i=(0,W.KR)(0),d=(0,W.KR)(""),c=(0,W.KR)(""),p=(0,W.KR)(null),v=(0,W.KR)(""),m=(0,W.KR)("summary"),k=(0,W.Kh)({dimensions:["completeness","coverage","executability","clarity"],depth:"detailed",requirements:""}),b=(0,W.KR)(null),g=(0,W.KR)(null),_=(0,t.EW)(()=>a.value.length>0||n.value.trim().length>0),F=(0,t.EW)(()=>s.value.length>0||o.value.trim().length>0),f=()=>{l.value<2&&l.value++},h=()=>{l.value>0&&l.value--},w=()=>{l.value=0,a.value=[],s.value=[],n.value="",o.value="",p.value=null,r.value=!1,i.value=0},C=e=>{a.value.push(e)},R=e=>{const l=a.value.findIndex(l=>l.uid===e.uid);l>-1&&a.value.splice(l,1)},L=e=>{s.value.push(e)},y=e=>{const l=s.value.findIndex(l=>l.uid===e.uid);l>-1&&s.value.splice(l,1)},x=async()=>{if(0!==s.value.length||0!==o.value.trim().length){u.value=!0,r.value=!0,i.value=0,d.value="active",c.value="正在上传文件...";try{const t=new FormData;a.value.forEach((e,l)=>{t.append("requirementFiles",e.raw)}),n.value.trim()&&t.append("requirementContent",n.value),s.value.forEach((e,l)=>{t.append("testCaseFiles",e.raw)}),o.value.trim()&&t.append("testCaseContent",o.value),t.append("apiProvider",e.value),t.append("dimensions",JSON.stringify(k.dimensions)),t.append("depth",k.depth),t.append("requirements",k.requirements);const u=setInterval(()=>{i.value<90&&(i.value+=10,30===i.value?c.value="正在解析文件内容...":60===i.value?c.value="正在进行AI评审...":90===i.value&&(c.value="正在生成评审报告..."))},500),r=await U.A.post("/api/review-test-cases",t,{headers:{"Content-Type":"multipart/form-data"}});if(clearInterval(u),i.value=100,d.value="success",c.value="评审完成！",!r.data.success)throw new Error(r.data.error||"评审失败");p.value={content:r.data.content,overallScore:r.data.overallScore||4,reviewTime:new Date,totalCases:r.data.totalCases,issueCount:r.data.issueCount,suggestions:r.data.suggestions},v.value=r.data.downloadUrl,l.value=2,V.nk.success("用例评审完成")}catch(t){console.error("评审失败:",t),i.value=100,d.value="exception",c.value="评审失败",V.nk.error(t.message||"评审失败，请稍后重试"),p.value={content:"# 测试用例评审报告\n\n## 总体评价\n\n本次评审的测试用例整体质量良好，但仍有改进空间。\n\n## 详细分析\n\n### 1. 完整性分析\n- ✅ 测试用例覆盖了主要功能点\n- ⚠️ 部分边界条件测试用例缺失\n- ❌ 异常处理测试用例不够充分\n\n### 2. 可执行性分析\n- ✅ 测试步骤描述清晰\n- ✅ 预期结果明确\n- ⚠️ 部分前置条件描述不够详细\n\n### 3. 覆盖度分析\n- ✅ 功能覆盖度: 85%\n- ⚠️ 边界值覆盖度: 60%\n- ❌ 异常场景覆盖度: 40%\n\n*注意：由于网络问题，当前显示模拟评审结果。*",overallScore:3.5,reviewTime:new Date,totalCases:25,issueCount:8,suggestions:"## 改进建议\n\n1. **增加边界值测试**\n   - 建议添加最大值、最小值、临界值的测试用例\n   - 特别关注数值型输入的边界情况\n\n2. **完善异常处理测试**\n   - 增加非法输入的测试用例\n   - 添加系统异常情况的处理验证\n\n3. **优化测试步骤描述**\n   - 使测试步骤更加具体和可操作\n   - 明确每个步骤的预期结果\n\n4. **补充前置条件**\n   - 详细描述测试环境要求\n   - 明确测试数据准备步骤"},l.value=2}finally{u.value=!1,setTimeout(()=>{r.value=!1},2e3)}}else V.nk.warning("请先上传测试用例文件或输入测试用例内容")},S=()=>{v.value?window.open(v.value,"_blank"):V.nk.warning("暂无可下载的文件")},T=async()=>{if(p.value)try{const e=p.value.content+"\n\n"+p.value.suggestions;await navigator.clipboard.writeText(e),V.nk.success("评审结果已复制到剪贴板")}catch(e){V.nk.error("复制失败，请手动复制")}},q=e=>e?new Date(e).toLocaleString("zh-CN"):"N/A",K=e=>e?e.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"):"",D=e=>e?e.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>"):"",A=e=>0===e?"success":e<=5?"warning":"danger";return{selectedApi:e,currentStep:l,requirementFileList:a,testCaseFileList:s,requirementContent:n,testCaseContent:o,loading:u,showProgress:r,progress:i,progressStatus:d,progressText:c,reviewResult:p,downloadUrl:v,activeTab:m,reviewForm:k,requirementUploadRef:b,testCaseUploadRef:g,canProceedToStep2:_,canStartReview:F,nextStep:f,prevStep:h,restartReview:w,handleRequirementFileChange:C,handleRequirementFileRemove:R,handleTestCaseFileChange:L,handleTestCaseFileRemove:y,startReview:x,downloadResult:S,copyToClipboard:T,formatTime:q,formatReviewContent:K,formatSuggestions:D,getIssueTagType:A}}},D=a(6262);const A=(0,D.A)(K,[["render",T],["__scopeId","data-v-f447ddaa"]]);var I=A}}]);
//# sourceMappingURL=939.e53b0889.js.map