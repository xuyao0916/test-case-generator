"use strict";(self["webpackChunktest_case_generator_client"]=self["webpackChunktest_case_generator_client"]||[]).push([[903],{5903:function(e,t,s){s.r(t),s.d(t,{default:function(){return P}});var l=s(641),a=s(33);const n={class:"step-by-step-generator"},i={class:"card-header"},p={class:"step-content"},o={key:0,class:"step-panel"},d={class:"api-selection"},u={class:"input-mode-selection"},r={key:0,class:"text-input-area"},c={key:1,class:"file-upload-area"},h={key:0,class:"file-contents-preview"},k={key:2,class:"analysis-result"},F={class:"step-actions"},m={key:1,class:"step-panel"},f={class:"input-mode-selection"},g={key:0,class:"text-input-area"},y={key:1,class:"file-upload-area"},_={key:0,class:"file-contents-preview"},v={key:2,class:"supplement-result"},b={class:"step-actions"},L={key:2,class:"step-panel"},C={key:0,class:"generate-test-points"},x={key:1,class:"test-points-editor"},w={class:"step-actions"},R={key:3,class:"step-panel"},A={key:0,class:"generate-test-cases"},S={key:1,class:"final-result"},W={class:"result-header"},U={class:"result-actions"},I={class:"result-content"},X={class:"step-actions"};function Q(e,t,s,Q,T,V){const E=(0,l.g2)("DocumentAdd"),N=(0,l.g2)("el-icon"),M=(0,l.g2)("el-step"),D=(0,l.g2)("el-steps"),P=(0,l.g2)("el-radio-button"),z=(0,l.g2)("el-radio-group"),q=(0,l.g2)("el-input"),j=(0,l.g2)("upload-filled"),B=(0,l.g2)("el-upload"),O=(0,l.g2)("el-collapse-item"),K=(0,l.g2)("el-collapse"),$=(0,l.g2)("Magic"),G=(0,l.g2)("el-button"),H=(0,l.g2)("Refresh"),J=(0,l.g2)("ArrowRight"),Y=(0,l.g2)("ArrowLeft"),Z=(0,l.g2)("Download"),ee=(0,l.g2)("DocumentCopy"),te=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(te,{class:"main-card",shadow:"hover"},{header:(0,l.k6)(()=>[(0,l.Lk)("div",i,[t[10]||(t[10]=(0,l.Lk)("span",null,"分步骤测试用例生成",-1)),(0,l.bF)(N,null,{default:(0,l.k6)(()=>[(0,l.bF)(E)]),_:1})])]),default:(0,l.k6)(()=>[(0,l.bF)(D,{active:T.currentStep,"align-center":"",class:"steps-indicator"},{default:(0,l.k6)(()=>[(0,l.bF)(M,{title:"需求分析",description:"上传文件或输入需求内容"}),(0,l.bF)(M,{title:"需求补充",description:"补充额外需求信息（可选）"}),(0,l.bF)(M,{title:"测试点确认",description:"确认和编辑测试点"}),(0,l.bF)(M,{title:"生成测试用例",description:"基于前面内容生成最终测试用例"})]),_:1},8,["active"]),(0,l.Lk)("div",p,[0===T.currentStep?((0,l.uX)(),(0,l.CE)("div",o,[t[24]||(t[24]=(0,l.Lk)("h3",null,"步骤1：需求分析",-1)),t[25]||(t[25]=(0,l.Lk)("p",{class:"step-description"},"请上传需求文档或直接输入需求描述，系统将分析并提取关键信息。",-1)),(0,l.Lk)("div",d,[t[13]||(t[13]=(0,l.Lk)("h4",null,"选择AI服务",-1)),(0,l.bF)(z,{modelValue:T.selectedApi,"onUpdate:modelValue":t[0]||(t[0]=e=>T.selectedApi=e),class:"api-radio-group"},{default:(0,l.k6)(()=>[(0,l.bF)(P,{label:"cybotstar"},{default:(0,l.k6)(()=>t[11]||(t[11]=[(0,l.eW)("Cybotstar AI",-1)])),_:1,__:[11]}),(0,l.bF)(P,{label:"deepseek"},{default:(0,l.k6)(()=>t[12]||(t[12]=[(0,l.eW)("DeepSeek AI",-1)])),_:1,__:[12]})]),_:1},8,["modelValue"])]),(0,l.Lk)("div",u,[t[16]||(t[16]=(0,l.Lk)("h4",null,"输入方式",-1)),(0,l.bF)(z,{modelValue:T.step1InputMode,"onUpdate:modelValue":t[1]||(t[1]=e=>T.step1InputMode=e),class:"mode-radio-group"},{default:(0,l.k6)(()=>[(0,l.bF)(P,{label:"text"},{default:(0,l.k6)(()=>t[14]||(t[14]=[(0,l.eW)("文本输入",-1)])),_:1,__:[14]}),(0,l.bF)(P,{label:"file"},{default:(0,l.k6)(()=>t[15]||(t[15]=[(0,l.eW)("文件上传",-1)])),_:1,__:[15]})]),_:1},8,["modelValue"])]),"text"===T.step1InputMode?((0,l.uX)(),(0,l.CE)("div",r,[t[17]||(t[17]=(0,l.Lk)("h4",null,"需求描述",-1)),(0,l.bF)(q,{modelValue:T.step1TextInput,"onUpdate:modelValue":t[2]||(t[2]=e=>T.step1TextInput=e),type:"textarea",rows:8,placeholder:"请详细描述您的功能需求，包括：\\n1. 功能概述\\n2. 具体业务流程\\n3. 输入输出要求\\n4. 特殊约束条件\\n\\n例如：\\n用户登录功能：\\n- 支持用户名/邮箱登录\\n- 密码长度6-20位\\n- 登录失败3次锁定账户\\n- 支持记住登录状态",class:"text-input"},null,8,["modelValue"])])):(0,l.Q3)("",!0),"file"===T.step1InputMode?((0,l.uX)(),(0,l.CE)("div",c,[t[21]||(t[21]=(0,l.Lk)("h4",null,"上传需求文档",-1)),(0,l.bF)(B,{ref:"step1UploadRef",class:"upload-demo",drag:"","auto-upload":!1,"on-change":V.handleStep1FileChange,"on-remove":V.handleStep1FileRemove,"file-list":T.step1FileList,accept:".txt,.md,.docx,.doc,.pdf,.xlsx,.xls,.json,.xml,.csv",limit:10,multiple:""},{tip:(0,l.k6)(()=>t[18]||(t[18]=[(0,l.Lk)("div",{class:"el-upload__tip"}," 支持格式：.txt, .md, .docx, .doc, .pdf, .xlsx, .xls, .json, .xml, .csv（最大10MB） ",-1)])),default:(0,l.k6)(()=>[(0,l.bF)(N,{class:"el-icon--upload"},{default:(0,l.k6)(()=>[(0,l.bF)(j)]),_:1}),t[19]||(t[19]=(0,l.Lk)("div",{class:"el-upload__text"},[(0,l.eW)(" 将需求文档拖到此处，或"),(0,l.Lk)("em",null,"点击上传")],-1))]),_:1,__:[19]},8,["on-change","on-remove","file-list"]),T.step1FileContents.length>0?((0,l.uX)(),(0,l.CE)("div",h,[t[20]||(t[20]=(0,l.Lk)("h4",null,"文件内容预览",-1)),(0,l.bF)(K,{modelValue:T.step1ActiveFileNames,"onUpdate:modelValue":t[3]||(t[3]=e=>T.step1ActiveFileNames=e)},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(T.step1FileContents,(e,t)=>((0,l.uX)(),(0,l.Wv)(O,{key:t,title:e.fileName,name:e.fileName},{default:(0,l.k6)(()=>[(0,l.bF)(q,{value:e.content,type:"textarea",rows:8,placeholder:"文件内容将在这里显示...",readonly:"",class:"file-content-textarea"},null,8,["value"])]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),T.step1Result?((0,l.uX)(),(0,l.CE)("div",k,[t[22]||(t[22]=(0,l.Lk)("h4",null,"需求分析结果",-1)),(0,l.bF)(q,{modelValue:T.step1Result,"onUpdate:modelValue":t[4]||(t[4]=e=>T.step1Result=e),type:"textarea",rows:10,placeholder:"需求分析结果将在这里显示，您可以编辑修改...",class:"result-textarea"},null,8,["modelValue"])])):(0,l.Q3)("",!0),(0,l.Lk)("div",F,[(0,l.bF)(G,{type:"primary",loading:T.step1Loading,onClick:V.analyzeRequirements,disabled:!V.canAnalyze},{default:(0,l.k6)(()=>[T.step1Loading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(N,{key:0},{default:(0,l.k6)(()=>[(0,l.bF)($)]),_:1})),(0,l.eW)(" "+(0,a.v_)(T.step1Loading?"分析中...":"开始需求分析"),1)]),_:1},8,["loading","onClick","disabled"]),T.step1Failed?((0,l.uX)(),(0,l.Wv)(G,{key:0,type:"warning",loading:T.step1Loading,onClick:V.retryStep1},{default:(0,l.k6)(()=>[T.step1Loading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(N,{key:0},{default:(0,l.k6)(()=>[(0,l.bF)(H)]),_:1})),(0,l.eW)(" "+(0,a.v_)(T.step1Loading?"重试中...":"重试"),1)]),_:1},8,["loading","onClick"])):(0,l.Q3)("",!0),(0,l.bF)(G,{type:"success",onClick:V.nextStep,disabled:!T.step1Result},{default:(0,l.k6)(()=>[t[23]||(t[23]=(0,l.eW)(" 下一步 ",-1)),(0,l.bF)(N,null,{default:(0,l.k6)(()=>[(0,l.bF)(J)]),_:1})]),_:1,__:[23]},8,["onClick","disabled"])])])):(0,l.Q3)("",!0),1===T.currentStep?((0,l.uX)(),(0,l.CE)("div",m,[t[37]||(t[37]=(0,l.Lk)("h3",null,"步骤2：需求补充（可选）",-1)),t[38]||(t[38]=(0,l.Lk)("p",{class:"step-description"},"您可以上传额外的文档或输入补充信息来完善需求分析。",-1)),(0,l.Lk)("div",f,[t[28]||(t[28]=(0,l.Lk)("h4",null,"补充方式",-1)),(0,l.bF)(z,{modelValue:T.step2InputMode,"onUpdate:modelValue":t[5]||(t[5]=e=>T.step2InputMode=e),class:"mode-radio-group"},{default:(0,l.k6)(()=>[(0,l.bF)(P,{label:"text"},{default:(0,l.k6)(()=>t[26]||(t[26]=[(0,l.eW)("文本补充",-1)])),_:1,__:[26]}),(0,l.bF)(P,{label:"file"},{default:(0,l.k6)(()=>t[27]||(t[27]=[(0,l.eW)("文档补充",-1)])),_:1,__:[27]})]),_:1},8,["modelValue"])]),"text"===T.step2InputMode?((0,l.uX)(),(0,l.CE)("div",g,[t[29]||(t[29]=(0,l.Lk)("h4",null,"补充说明",-1)),(0,l.bF)(q,{modelValue:T.step2TextInput,"onUpdate:modelValue":t[6]||(t[6]=e=>T.step2TextInput=e),type:"textarea",rows:6,placeholder:"请输入需要补充的需求信息，例如：\\n- 特殊业务规则\\n- 异常处理要求\\n- 性能指标\\n- 安全要求等",class:"text-input"},null,8,["modelValue"])])):(0,l.Q3)("",!0),"file"===T.step2InputMode?((0,l.uX)(),(0,l.CE)("div",y,[t[33]||(t[33]=(0,l.Lk)("h4",null,"上传补充文档",-1)),(0,l.bF)(B,{ref:"step2UploadRef",class:"upload-demo",drag:"","auto-upload":!1,"on-change":V.handleStep2FileChange,"on-remove":V.handleStep2FileRemove,"file-list":T.step2FileList,accept:".txt,.md,.docx,.doc,.pdf,.xlsx,.xls,.json,.xml,.csv",limit:10,multiple:""},{tip:(0,l.k6)(()=>t[30]||(t[30]=[(0,l.Lk)("div",{class:"el-upload__tip"}," 支持格式：.txt, .md, .docx, .doc, .pdf, .xlsx, .xls, .json, .xml, .csv（最大10MB） ",-1)])),default:(0,l.k6)(()=>[(0,l.bF)(N,{class:"el-icon--upload"},{default:(0,l.k6)(()=>[(0,l.bF)(j)]),_:1}),t[31]||(t[31]=(0,l.Lk)("div",{class:"el-upload__text"},[(0,l.eW)(" 将补充文档拖到此处，或"),(0,l.Lk)("em",null,"点击上传")],-1))]),_:1,__:[31]},8,["on-change","on-remove","file-list"]),T.step2FileContents.length>0?((0,l.uX)(),(0,l.CE)("div",_,[t[32]||(t[32]=(0,l.Lk)("h4",null,"文件内容预览",-1)),(0,l.bF)(K,{modelValue:T.step2ActiveFileNames,"onUpdate:modelValue":t[7]||(t[7]=e=>T.step2ActiveFileNames=e)},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(T.step2FileContents,(e,t)=>((0,l.uX)(),(0,l.Wv)(O,{key:t,title:e.fileName,name:e.fileName},{default:(0,l.k6)(()=>[(0,l.bF)(q,{value:e.content,type:"textarea",rows:8,placeholder:"文件内容将在这里显示...",readonly:"",class:"file-content-textarea"},null,8,["value"])]),_:2},1032,["title","name"]))),128))]),_:1},8,["modelValue"])])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),T.step2Result?((0,l.uX)(),(0,l.CE)("div",v,[t[34]||(t[34]=(0,l.Lk)("h4",null,"需求补充结果",-1)),(0,l.bF)(q,{modelValue:T.step2Result,"onUpdate:modelValue":t[8]||(t[8]=e=>T.step2Result=e),type:"textarea",rows:8,placeholder:"补充分析结果将在这里显示，您可以编辑修改...",class:"result-textarea"},null,8,["modelValue"])])):(0,l.Q3)("",!0),(0,l.Lk)("div",b,[(0,l.bF)(G,{onClick:V.prevStep},{default:(0,l.k6)(()=>[(0,l.bF)(N,null,{default:(0,l.k6)(()=>[(0,l.bF)(Y)]),_:1}),t[35]||(t[35]=(0,l.eW)(" 上一步 ",-1))]),_:1,__:[35]},8,["onClick"]),V.hasSupplementContent?((0,l.uX)(),(0,l.Wv)(G,{key:0,type:"primary",loading:T.step2Loading,onClick:V.supplementRequirements,disabled:!V.canSupplement},{default:(0,l.k6)(()=>[T.step2Loading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(N,{key:0},{default:(0,l.k6)(()=>[(0,l.bF)($)]),_:1})),(0,l.eW)(" "+(0,a.v_)(T.step2Loading?"分析中...":"分析补充内容"),1)]),_:1},8,["loading","onClick","disabled"])):(0,l.Q3)("",!0),T.step2Failed&&V.hasSupplementContent?((0,l.uX)(),(0,l.Wv)(G,{key:1,type:"warning",loading:T.step2Loading,onClick:V.retryStep2},{default:(0,l.k6)(()=>[T.step2Loading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(N,{key:0},{default:(0,l.k6)(()=>[(0,l.bF)(H)]),_:1})),(0,l.eW)(" "+(0,a.v_)(T.step2Loading?"重试中...":"重试"),1)]),_:1},8,["loading","onClick"])):(0,l.Q3)("",!0),(0,l.bF)(G,{type:"success",onClick:V.nextStep},{default:(0,l.k6)(()=>[t[36]||(t[36]=(0,l.eW)(" 下一步 ",-1)),(0,l.bF)(N,null,{default:(0,l.k6)(()=>[(0,l.bF)(J)]),_:1})]),_:1,__:[36]},8,["onClick"])])])):(0,l.Q3)("",!0),2===T.currentStep?((0,l.uX)(),(0,l.CE)("div",L,[t[43]||(t[43]=(0,l.Lk)("h3",null,"步骤3：测试点确认",-1)),t[44]||(t[44]=(0,l.Lk)("p",{class:"step-description"},"基于需求分析结果，系统将生成测试点，您可以查看、编辑和补充。",-1)),T.step3Result?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",C,[(0,l.bF)(G,{type:"primary",loading:T.step3Loading,onClick:V.generateTestPoints,size:"large"},{default:(0,l.k6)(()=>[T.step3Loading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(N,{key:0},{default:(0,l.k6)(()=>[(0,l.bF)($)]),_:1})),(0,l.eW)(" "+(0,a.v_)(T.step3Loading?"生成中...":"生成测试点"),1)]),_:1},8,["loading","onClick"])])),T.step3Result?((0,l.uX)(),(0,l.CE)("div",x,[t[39]||(t[39]=(0,l.Lk)("h4",null,"测试点列表",-1)),t[40]||(t[40]=(0,l.Lk)("p",{class:"editor-tip"},"请检查并编辑测试点，确保覆盖所有重要的测试场景：",-1)),(0,l.bF)(q,{modelValue:T.step3Result,"onUpdate:modelValue":t[9]||(t[9]=e=>T.step3Result=e),type:"textarea",rows:12,placeholder:"测试点将在这里显示，您可以编辑、添加或删除测试点...",class:"test-points-textarea"},null,8,["modelValue"])])):(0,l.Q3)("",!0),(0,l.Lk)("div",w,[(0,l.bF)(G,{onClick:V.prevStep},{default:(0,l.k6)(()=>[(0,l.bF)(N,null,{default:(0,l.k6)(()=>[(0,l.bF)(Y)]),_:1}),t[41]||(t[41]=(0,l.eW)(" 上一步 ",-1))]),_:1,__:[41]},8,["onClick"]),T.step3Result?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(G,{key:0,type:"primary",loading:T.step3Loading,onClick:V.generateTestPoints},{default:(0,l.k6)(()=>[T.step3Loading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(N,{key:0},{default:(0,l.k6)(()=>[(0,l.bF)($)]),_:1})),(0,l.eW)(" "+(0,a.v_)(T.step3Loading?"生成中...":"重新生成测试点"),1)]),_:1},8,["loading","onClick"])),T.step3Failed?((0,l.uX)(),(0,l.Wv)(G,{key:1,type:"warning",loading:T.step3Loading,onClick:V.retryStep3},{default:(0,l.k6)(()=>[T.step3Loading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(N,{key:0},{default:(0,l.k6)(()=>[(0,l.bF)(H)]),_:1})),(0,l.eW)(" "+(0,a.v_)(T.step3Loading?"重试中...":"重试"),1)]),_:1},8,["loading","onClick"])):(0,l.Q3)("",!0),(0,l.bF)(G,{type:"success",onClick:V.nextStep,disabled:!T.step3Result},{default:(0,l.k6)(()=>[t[42]||(t[42]=(0,l.eW)(" 下一步 ",-1)),(0,l.bF)(N,null,{default:(0,l.k6)(()=>[(0,l.bF)(J)]),_:1})]),_:1,__:[42]},8,["onClick","disabled"])])])):(0,l.Q3)("",!0),3===T.currentStep?((0,l.uX)(),(0,l.CE)("div",R,[t[50]||(t[50]=(0,l.Lk)("h3",null,"步骤4：生成测试用例",-1)),t[51]||(t[51]=(0,l.Lk)("p",{class:"step-description"},"基于前面的需求分析和测试点，生成完整的测试用例。",-1)),T.finalResult?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",A,[(0,l.bF)(G,{type:"primary",loading:T.finalLoading,onClick:V.generateFinalTestCases,size:"large"},{default:(0,l.k6)(()=>[T.finalLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(N,{key:0},{default:(0,l.k6)(()=>[(0,l.bF)($)]),_:1})),(0,l.eW)(" "+(0,a.v_)(T.finalLoading?"生成中...":"生成最终测试用例"),1)]),_:1},8,["loading","onClick"])])),T.finalResult?((0,l.uX)(),(0,l.CE)("div",S,[(0,l.Lk)("div",W,[t[47]||(t[47]=(0,l.Lk)("h4",null,"测试用例生成完成",-1)),(0,l.Lk)("div",U,[(0,l.bF)(G,{type:"success",onClick:V.downloadResult,disabled:!T.downloadUrl},{default:(0,l.k6)(()=>[(0,l.bF)(N,null,{default:(0,l.k6)(()=>[(0,l.bF)(Z)]),_:1}),t[45]||(t[45]=(0,l.eW)(" 下载XMind文件 ",-1))]),_:1,__:[45]},8,["onClick","disabled"]),(0,l.bF)(G,{onClick:V.copyToClipboard},{default:(0,l.k6)(()=>[(0,l.bF)(N,null,{default:(0,l.k6)(()=>[(0,l.bF)(ee)]),_:1}),t[46]||(t[46]=(0,l.eW)(" 复制内容 ",-1))]),_:1,__:[46]},8,["onClick"])])]),(0,l.Lk)("div",I,[(0,l.Lk)("pre",null,(0,a.v_)(T.finalResult),1)])])):(0,l.Q3)("",!0),(0,l.Lk)("div",X,[(0,l.bF)(G,{onClick:V.prevStep},{default:(0,l.k6)(()=>[(0,l.bF)(N,null,{default:(0,l.k6)(()=>[(0,l.bF)(Y)]),_:1}),t[48]||(t[48]=(0,l.eW)(" 上一步 ",-1))]),_:1,__:[48]},8,["onClick"]),T.step4Failed?((0,l.uX)(),(0,l.Wv)(G,{key:0,type:"warning",loading:T.finalLoading,onClick:V.retryStep4},{default:(0,l.k6)(()=>[T.finalLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(N,{key:0},{default:(0,l.k6)(()=>[(0,l.bF)(H)]),_:1})),(0,l.eW)(" "+(0,a.v_)(T.finalLoading?"重试中...":"重试"),1)]),_:1},8,["loading","onClick"])):(0,l.Q3)("",!0),(0,l.bF)(G,{type:"primary",onClick:V.resetAll},{default:(0,l.k6)(()=>[(0,l.bF)(N,null,{default:(0,l.k6)(()=>[(0,l.bF)(H)]),_:1}),t[49]||(t[49]=(0,l.eW)(" 重新开始 ",-1))]),_:1,__:[49]},8,["onClick"])])])):(0,l.Q3)("",!0)])]),_:1})])}var T=s(4335),V=s(163),E=s(8548),N={name:"StepByStepGenerator",components:{UploadFilled:E.UploadFilled,DocumentAdd:E.DocumentAdd,Magic:E.Magic,ArrowRight:E.ArrowRight,ArrowLeft:E.ArrowLeft,Download:E.Download,DocumentCopy:E.DocumentCopy,Refresh:E.Refresh},data(){return{currentStep:0,selectedApi:"cybotstar",step1InputMode:"text",step1TextInput:"",step1FileList:[],step1UploadedFiles:[],step1FileContents:[],step1ActiveFileNames:[],step1Result:"",step1Loading:!1,step1Failed:!1,step2InputMode:"text",step2TextInput:"",step2FileList:[],step2UploadedFiles:[],step2FileContents:[],step2ActiveFileNames:[],step2Result:"",step2Loading:!1,step2Failed:!1,step3Result:"",step3Loading:!1,step3Failed:!1,finalResult:"",finalLoading:!1,step4Failed:!1,downloadUrl:""}},computed:{canAnalyze(){return"text"===this.step1InputMode?this.step1TextInput.trim().length>0:this.step1UploadedFiles.length>0},canSupplement(){return"text"===this.step2InputMode?this.step2TextInput.trim().length>0:this.step2UploadedFiles.length>0},hasSupplementContent(){return"text"===this.step2InputMode&&this.step2TextInput.trim().length>0||"file"===this.step2InputMode&&this.step2UploadedFiles.length>0}},methods:{nextStep(){this.currentStep<3&&this.currentStep++},prevStep(){this.currentStep>0&&this.currentStep--},handleStep1FileChange(e){this.step1UploadedFiles.push(e.raw);const t=new FileReader;t.onload=t=>{const s={fileName:e.name,content:t.target.result};this.step1FileContents.push(s),this.step1ActiveFileNames.includes(e.name)||this.step1ActiveFileNames.push(e.name)},t.readAsText(e.raw)},handleStep1FileRemove(e){const t=this.step1UploadedFiles.findIndex(t=>t.name===e.name);t>-1&&this.step1UploadedFiles.splice(t,1);const s=this.step1FileContents.findIndex(t=>t.fileName===e.name);s>-1&&this.step1FileContents.splice(s,1);const l=this.step1ActiveFileNames.indexOf(e.name);l>-1&&this.step1ActiveFileNames.splice(l,1)},handleStep2FileChange(e){this.step2UploadedFiles.push(e.raw);const t=new FileReader;t.onload=t=>{const s={fileName:e.name,content:t.target.result};this.step2FileContents.push(s),this.step2ActiveFileNames.includes(e.name)||this.step2ActiveFileNames.push(e.name)},t.readAsText(e.raw)},handleStep2FileRemove(e){const t=this.step2UploadedFiles.findIndex(t=>t.name===e.name);t>-1&&this.step2UploadedFiles.splice(t,1);const s=this.step2FileContents.findIndex(t=>t.fileName===e.name);s>-1&&this.step2FileContents.splice(s,1);const l=this.step2ActiveFileNames.indexOf(e.name);l>-1&&this.step2ActiveFileNames.splice(l,1)},async analyzeRequirements(){this.step1Loading=!0,this.step1Failed=!1;try{const e=new FormData;"text"===this.step1InputMode?e.append("textInput",this.step1TextInput):this.step1UploadedFiles.length>0&&this.step1UploadedFiles.forEach(t=>{e.append("files",t)}),e.append("apiProvider",this.selectedApi),e.append("step","requirements_analysis");const t=await T.A.post("/api/step-by-step/analyze",e,{headers:{"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error(t.data.error||"需求分析失败");this.step1Result=t.data.analysis,this.step1Failed=!1,V.nk.success("需求分析完成")}catch(e){console.error("需求分析失败:",e),this.step1Failed=!0;const t=e.response?.data?.error||e.message||"生成失败，请重新尝试生成";V.nk.error(t)}finally{this.step1Loading=!1}},async supplementRequirements(){this.step2Loading=!0,this.step2Failed=!1;try{const e=new FormData;"text"===this.step2InputMode?e.append("supplementText",this.step2TextInput):this.step2UploadedFiles.length>0&&this.step2UploadedFiles.forEach(t=>{e.append("files",t)}),e.append("apiProvider",this.selectedApi),e.append("originalAnalysis",this.step1Result);const t=await T.A.post("/api/step-by-step/supplement",e,{headers:{"Content-Type":"multipart/form-data"}});if(!t.data.success)throw new Error(t.data.error||"需求补充失败");this.step2Result=t.data.updatedAnalysis,this.step2Failed=!1,V.nk.success("需求补充完成")}catch(e){console.error("需求补充失败:",e),this.step2Failed=!0;const t=e.response?.data?.error||e.message||"生成失败，请重新尝试生成";V.nk.error(t)}finally{this.step2Loading=!1}},async generateTestPoints(){this.step3Loading=!0,this.step3Failed=!1;try{const e=this.step1Result+(this.step2Result?"\n\n"+this.step2Result:""),t=await T.A.post("/api/step-by-step/test-points",{analysisContent:e,apiProvider:this.selectedApi});if(!t.data.success)throw new Error(t.data.error||"测试点生成失败");this.step3Result=t.data.testPoints,this.step3Failed=!1,V.nk.success("测试点生成完成")}catch(e){console.error("测试点生成失败:",e),this.step3Failed=!0;const t=e.response?.data?.error||e.message||"生成失败，请重新尝试生成";V.nk.error(t)}finally{this.step3Loading=!1}},async generateFinalTestCases(){this.finalLoading=!0,this.step4Failed=!1;try{const e=this.step1Result+(this.step2Result?"\n\n"+this.step2Result:""),t=await T.A.post("/api/step-by-step/generate-final",{analysisContent:e,testPoints:this.step3Result,apiProvider:this.selectedApi});if(!t.data.success)throw new Error(t.data.error||"测试用例生成失败");this.finalResult=t.data.content,this.downloadUrl=`/api/download/${t.data.filename}`,this.step4Failed=!1,V.nk.success("测试用例生成完成")}catch(e){console.error("测试用例生成失败:",e),this.step4Failed=!0;const t=e.response?.data?.error||e.message||"生成失败，请重新尝试生成";V.nk.error(t)}finally{this.finalLoading=!1}},async downloadResult(){if(this.downloadUrl)try{const e=await T.A.get(this.downloadUrl,{responseType:"blob"}),t=new Blob([e.data],{type:"application/octet-stream"}),s=window.URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download=`test-cases-${(new Date).getTime()}.xmind`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(s),V.nk.success("文件下载成功！")}catch(e){console.error("下载失败:",e),V.nk.error("文件下载失败")}else V.nk.warning("暂无可下载的文件")},async copyToClipboard(){try{await navigator.clipboard.writeText(this.finalResult),V.nk.success("内容已复制到剪贴板")}catch(e){console.error("复制失败:",e),V.nk.error("复制失败，请手动复制")}},resetAll(){this.currentStep=0,this.step1TextInput="",this.step1FileList=[],this.step1UploadedFiles=[],this.step1FileContents=[],this.step1ActiveFileNames=[],this.step1Result="",this.step1Failed=!1,this.step2TextInput="",this.step2FileList=[],this.step2UploadedFiles=[],this.step2FileContents=[],this.step2ActiveFileNames=[],this.step2Result="",this.step2Failed=!1,this.step3Result="",this.step3Failed=!1,this.finalResult="",this.step4Failed=!1,this.downloadUrl="",V.nk.success("已重置所有内容")},retryStep1(){this.analyzeRequirements()},retryStep2(){this.supplementRequirements()},retryStep3(){this.generateTestPoints()},retryStep4(){this.generateFinalTestCases()}}},M=s(6262);const D=(0,M.A)(N,[["render",Q],["__scopeId","data-v-352c7c26"]]);var P=D}}]);
//# sourceMappingURL=903.b9166cf6.js.map