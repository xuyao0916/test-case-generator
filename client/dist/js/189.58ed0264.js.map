{"version":3,"file":"js/189.58ed0264.js","mappings":"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","sources":["webpack://test-case-generator-client/./src/views/FormatConverter.vue","webpack://test-case-generator-client/./src/views/FormatConverter.vue?dd91"],"sourcesContent":["<template>\n  <div class=\"format-converter\">\n    <el-card class=\"page-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <h2>用例格式转换</h2>\n          <p>支持上传Excel、XMind等格式文件，自动转换为标准XMind测试用例格式</p>\n        </div>\n      </template>\n      \n      <div class=\"converter-content\">\n        <!-- 上传区域 -->\n        <div class=\"upload-section\">\n          <h3 class=\"section-title\">文件上传</h3>\n          <el-upload\n            ref=\"uploadRef\"\n            class=\"upload-dragger\"\n            drag\n            :auto-upload=\"false\"\n            :on-change=\"handleFileChange\"\n            :before-upload=\"beforeUpload\"\n            accept=\".xlsx,.xls,.xmind,.txt,.md,.json,.xml,.csv\"\n            :limit=\"1\"\n            :on-exceed=\"handleExceed\"\n          >\n            <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n            <div class=\"el-upload__text\">\n              将文件拖到此处，或<em>点击上传</em>\n            </div>\n            <template #tip>\n              <div class=\"el-upload__tip\">\n                支持格式：Excel(.xlsx/.xls)、XMind(.xmind)、文本(.txt/.md)、JSON(.json)、XML(.xml)、CSV(.csv)\n              </div>\n            </template>\n          </el-upload>\n        </div>\n\n        <!-- 转换选项 -->\n        <div class=\"options-section\" v-if=\"uploadedFile\">\n          <h3 class=\"section-title\">转换选项</h3>\n          <el-form :model=\"convertForm\" label-width=\"120px\">\n            <el-form-item label=\"文件名称\">\n              <el-input v-model=\"convertForm.fileName\" placeholder=\"请输入转换后的文件名称\" />\n            </el-form-item>\n            <el-form-item label=\"转换说明\">\n              <el-input\n                v-model=\"convertForm.description\"\n                type=\"textarea\"\n                :rows=\"3\"\n                placeholder=\"请描述文件内容或转换要求（可选）\"\n              />\n            </el-form-item>\n          </el-form>\n        </div>\n\n        <!-- 操作按钮 -->\n        <div class=\"action-section\" v-if=\"uploadedFile\">\n          <el-button type=\"primary\" @click=\"convertFile\" :loading=\"converting\" size=\"large\">\n            <el-icon><Magic /></el-icon>\n            开始转换\n          </el-button>\n          <el-button @click=\"clearFile\" size=\"large\">\n            <el-icon><RefreshLeft /></el-icon>\n            重新上传\n          </el-button>\n        </div>\n\n        <!-- 转换结果 -->\n        <div class=\"result-section\" v-if=\"convertResult\">\n          <h3 class=\"section-title\">转换结果</h3>\n          <el-alert\n            title=\"转换成功！\"\n            type=\"success\"\n            :description=\"`文件已成功转换为XMind格式，共解析出 ${testCaseCount} 个测试用例`\"\n            show-icon\n            :closable=\"false\"\n          />\n          \n          <div class=\"result-actions\">\n            <el-button type=\"success\" @click=\"downloadResult\" size=\"large\">\n              <el-icon><Download /></el-icon>\n              下载XMind文件\n            </el-button>\n            <el-button @click=\"previewResult\" size=\"large\">\n              <el-icon><ViewIcon /></el-icon>\n              预览内容\n            </el-button>\n          </div>\n        </div>\n\n        <!-- 预览对话框 -->\n        <el-dialog v-model=\"previewVisible\" title=\"转换预览\" width=\"80%\" top=\"5vh\">\n          <div class=\"preview-content\" v-html=\"previewHtml\"></div>\n          <template #footer>\n            <el-button @click=\"previewVisible = false\">关闭</el-button>\n            <el-button type=\"primary\" @click=\"downloadResult\">\n              <el-icon><Download /></el-icon>\n              下载文件\n            </el-button>\n          </template>\n        </el-dialog>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport { UploadFilled, Magic, RefreshLeft, Download, View as ViewIcon } from '@element-plus/icons-vue'\nimport axios from 'axios'\n\nexport default {\n  name: 'FormatConverter',\n  components: {\n    UploadFilled,\n    Magic,\n    RefreshLeft,\n    Download,\n    ViewIcon\n  },\n  setup() {\n    const uploadRef = ref()\n    const uploadedFile = ref(null)\n    const converting = ref(false)\n    const convertResult = ref('')\n    const testCaseCount = ref(0)\n    const previewVisible = ref(false)\n    const previewHtml = ref('')\n    const downloadUrl = ref('')\n    \n    const convertForm = reactive({\n      fileName: '',\n      description: ''\n    })\n\n    // 文件变化处理\n    const handleFileChange = (file) => {\n      uploadedFile.value = file\n      convertForm.fileName = file.name.replace(/\\.[^/.]+$/, '') + '-converted'\n      ElMessage.success('文件上传成功，请设置转换选项')\n    }\n\n    // 上传前验证\n    const beforeUpload = (file) => {\n      const allowedTypes = [\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', // xlsx\n        'application/vnd.ms-excel', // xls\n        'application/vnd.xmind.workbook', // xmind\n        'text/plain', // txt\n        'text/markdown', // md\n        'application/json', // json\n        'application/xml', // xml\n        'text/xml', // xml\n        'text/csv' // csv\n      ]\n      \n      const isValidType = allowedTypes.includes(file.type) || \n                         file.name.toLowerCase().endsWith('.xmind') ||\n                         file.name.toLowerCase().endsWith('.md')\n      \n      if (!isValidType) {\n        ElMessage.error('不支持的文件格式！')\n        return false\n      }\n      \n      const isLt10M = file.size / 1024 / 1024 < 10\n      if (!isLt10M) {\n        ElMessage.error('文件大小不能超过 10MB!')\n        return false\n      }\n      \n      return true\n    }\n\n    // 文件数量超限处理\n    const handleExceed = () => {\n      ElMessage.warning('只能上传一个文件，请先删除已上传的文件')\n    }\n\n    // 清空文件\n    const clearFile = () => {\n      uploadRef.value.clearFiles()\n      uploadedFile.value = null\n      convertResult.value = ''\n      convertForm.fileName = ''\n      convertForm.description = ''\n      downloadUrl.value = ''\n      testCaseCount.value = 0\n    }\n\n    // 转换文件\n    const convertFile = async () => {\n      if (!uploadedFile.value) {\n        ElMessage.error('请先上传文件')\n        return\n      }\n      \n      if (!convertForm.fileName.trim()) {\n        ElMessage.error('请输入文件名称')\n        return\n      }\n\n      converting.value = true\n      \n      try {\n        const formData = new FormData()\n        formData.append('file', uploadedFile.value.raw)\n        formData.append('fileName', convertForm.fileName)\n        formData.append('description', convertForm.description)\n        \n        const response = await axios.post('/api/convert-format', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          },\n          timeout: 120000 // 2分钟超时\n        })\n        \n        if (response.data.success) {\n          convertResult.value = response.data.content\n          // 简单计算测试用例数量（通过统计TC-开头的行数）\n          const tcMatches = response.data.content.match(/TC-\\d+/g)\n          testCaseCount.value = tcMatches ? tcMatches.length : 0\n          downloadUrl.value = response.data.downloadUrl\n          ElMessage.success('文件转换成功！')\n        } else {\n          ElMessage.error(response.data.error || '转换失败')\n        }\n      } catch (error) {\n        console.error('转换失败:', error)\n        ElMessage.error('转换失败，请稍后重试')\n      } finally {\n        converting.value = false\n      }\n    }\n\n    // 预览结果\n    const previewResult = () => {\n      if (!convertResult.value) {\n        ElMessage.error('没有可预览的内容')\n        return\n      }\n      \n      // 将Markdown转换为HTML显示\n      previewHtml.value = convertResult.value\n        .replace(/\\n/g, '<br>')\n        .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n        .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n        .replace(/^### (.*$)/gim, '<h3>$1</h3>')\n        .replace(/^## (.*$)/gim, '<h2>$1</h2>')\n        .replace(/^# (.*$)/gim, '<h1>$1</h1>')\n      \n      previewVisible.value = true\n    }\n\n    // 下载结果\n    const downloadResult = () => {\n      if (!downloadUrl.value) {\n        ElMessage.error('没有可下载的文件')\n        return\n      }\n      \n      const link = document.createElement('a')\n      link.href = downloadUrl.value\n      link.download = ''\n      document.body.appendChild(link)\n      link.click()\n      document.body.removeChild(link)\n      \n      ElMessage.success('文件下载成功')\n    }\n\n    return {\n      uploadRef,\n      uploadedFile,\n      converting,\n      convertResult,\n      testCaseCount,\n      previewVisible,\n      previewHtml,\n      downloadUrl,\n      convertForm,\n      handleFileChange,\n      beforeUpload,\n      handleExceed,\n      clearFile,\n      convertFile,\n      previewResult,\n      downloadResult\n    }\n  }\n}\n</script>\n\n<style scoped>\n.format-converter {\n  padding: 20px;\n}\n\n.page-card {\n  max-width: 1000px;\n  margin: 0 auto;\n}\n\n.card-header h2 {\n  margin: 0 0 8px 0;\n  color: #303133;\n}\n\n.card-header p {\n  margin: 0;\n  color: #909399;\n  font-size: 14px;\n}\n\n.converter-content {\n  padding: 20px 0;\n}\n\n.section-title {\n  margin: 0 0 20px 0;\n  color: #303133;\n  font-size: 16px;\n  font-weight: 600;\n  border-left: 4px solid #409EFF;\n  padding-left: 12px;\n}\n\n.upload-section {\n  margin-bottom: 30px;\n}\n\n.upload-dragger {\n  width: 100%;\n}\n\n.options-section {\n  margin-bottom: 30px;\n  padding: 20px;\n  background-color: #f8f9fa;\n  border-radius: 8px;\n}\n\n.action-section {\n  margin-bottom: 30px;\n  text-align: center;\n}\n\n.action-section .el-button {\n  margin: 0 10px;\n}\n\n.result-section {\n  padding: 20px;\n  background-color: #f0f9ff;\n  border-radius: 8px;\n  border: 1px solid #e1f5fe;\n}\n\n.result-actions {\n  margin-top: 20px;\n  text-align: center;\n}\n\n.result-actions .el-button {\n  margin: 0 10px;\n}\n\n.preview-content {\n  max-height: 60vh;\n  overflow-y: auto;\n  padding: 20px;\n  background-color: #fafafa;\n  border-radius: 4px;\n  line-height: 1.6;\n}\n\n.preview-content h1,\n.preview-content h2,\n.preview-content h3 {\n  color: #303133;\n  margin-top: 20px;\n  margin-bottom: 10px;\n}\n\n.preview-content h1 {\n  font-size: 24px;\n}\n\n.preview-content h2 {\n  font-size: 20px;\n}\n\n.preview-content h3 {\n  font-size: 16px;\n}\n</style>","import { render } from \"./FormatConverter.vue?vue&type=template&id=f3c422be&scoped=true\"\nimport script from \"./FormatConverter.vue?vue&type=script&lang=js\"\nexport * from \"./FormatConverter.vue?vue&type=script&lang=js\"\n\nimport \"./FormatConverter.vue?vue&type=style&index=0&id=f3c422be&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f3c422be\"]])\n\nexport default __exports__"],"names":["class","header","ref","drag","handleFileChange","beforeUpload","accept","limit","handleExceed","tip","model","convertForm","label","fileName","placeholder","description","type","rows","convertFile","loading","converting","size","clearFile","title","testCaseCount","closable","downloadResult","previewResult","previewVisible","width","top","footer","previewHtml","name","components","UploadFilled","Magic","RefreshLeft","Download","ViewIcon","setup","uploadRef","uploadedFile","convertResult","downloadUrl","file","value","replace","success","allowedTypes","isValidType","includes","toLowerCase","endsWith","error","isLt10M","warning","clearFiles","async","trim","formData","FormData","append","raw","response","axios","post","headers","timeout","data","content","tcMatches","match","length","console","link","document","createElement","href","download","body","appendChild","click","removeChild","__exports__","render"],"sourceRoot":""}