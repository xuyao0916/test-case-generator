"use strict";(self["webpackChunktest_case_generator_client"]=self["webpackChunktest_case_generator_client"]||[]).push([[489],{9489:function(e,t,l){l.r(t),l.d(t,{default:function(){return F}});var a=l(641),o=l(33);const s={class:"api-test"},r={key:0,class:"response-section"},n={class:"response-content"};function u(e,t,l,u,d,i){const c=(0,a.g2)("el-option"),m=(0,a.g2)("el-select"),p=(0,a.g2)("el-form-item"),b=(0,a.g2)("el-input"),f=(0,a.g2)("Position"),k=(0,a.g2)("el-icon"),F=(0,a.g2)("el-button"),h=(0,a.g2)("RefreshLeft"),_=(0,a.g2)("el-form"),g=(0,a.g2)("el-divider"),y=(0,a.g2)("el-tag"),v=(0,a.g2)("el-descriptions-item"),T=(0,a.g2)("el-descriptions"),E=(0,a.g2)("el-empty"),V=(0,a.g2)("el-card");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(V,{class:"page-card"},{header:(0,a.k6)(()=>t[5]||(t[5]=[(0,a.Lk)("div",{class:"card-header"},[(0,a.Lk)("h2",null,"接口测试"),(0,a.Lk)("p",null,"测试API接口的功能和性能")],-1)])),default:(0,a.k6)(()=>[(0,a.bF)(_,{model:u.testForm,"label-width":"120px",class:"test-form"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{label:"请求方法"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{modelValue:u.testForm.method,"onUpdate:modelValue":t[0]||(t[0]=e=>u.testForm.method=e),placeholder:"选择请求方法"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{label:"GET",value:"GET"}),(0,a.bF)(c,{label:"POST",value:"POST"}),(0,a.bF)(c,{label:"PUT",value:"PUT"}),(0,a.bF)(c,{label:"DELETE",value:"DELETE"})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(p,{label:"请求URL"},{default:(0,a.k6)(()=>[(0,a.bF)(b,{modelValue:u.testForm.url,"onUpdate:modelValue":t[1]||(t[1]=e=>u.testForm.url=e),placeholder:"输入API接口地址"},null,8,["modelValue"])]),_:1}),(0,a.bF)(p,{label:"请求头"},{default:(0,a.k6)(()=>[(0,a.bF)(b,{modelValue:u.testForm.headers,"onUpdate:modelValue":t[2]||(t[2]=e=>u.testForm.headers=e),type:"textarea",rows:3,placeholder:'JSON格式，例如：{"Content-Type": "application/json"}'},null,8,["modelValue"])]),_:1}),"GET"!==u.testForm.method?((0,a.uX)(),(0,a.Wv)(p,{key:0,label:"请求体"},{default:(0,a.k6)(()=>[(0,a.bF)(b,{modelValue:u.testForm.body,"onUpdate:modelValue":t[3]||(t[3]=e=>u.testForm.body=e),type:"textarea",rows:5,placeholder:"JSON格式的请求体数据"},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),(0,a.bF)(p,null,{default:(0,a.k6)(()=>[(0,a.bF)(F,{type:"primary",onClick:u.sendRequest,loading:u.loading},{default:(0,a.k6)(()=>[(0,a.bF)(k,null,{default:(0,a.k6)(()=>[(0,a.bF)(f)]),_:1}),t[6]||(t[6]=(0,a.eW)(" 发送请求 ",-1))]),_:1,__:[6]},8,["onClick","loading"]),(0,a.bF)(F,{onClick:u.clearForm},{default:(0,a.k6)(()=>[(0,a.bF)(k,null,{default:(0,a.k6)(()=>[(0,a.bF)(h)]),_:1}),t[7]||(t[7]=(0,a.eW)(" 清空 ",-1))]),_:1,__:[7]},8,["onClick"])]),_:1})]),_:1},8,["model"]),(0,a.bF)(g,null,{default:(0,a.k6)(()=>t[8]||(t[8]=[(0,a.eW)("响应结果",-1)])),_:1,__:[8]}),u.response?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(T,{column:2,border:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{label:"状态码"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{type:u.getStatusType(u.response.status)},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(u.response.status),1)]),_:1},8,["type"])]),_:1}),(0,a.bF)(v,{label:"响应时间"},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(u.response.duration)+"ms ",1)]),_:1})]),_:1}),(0,a.Lk)("div",n,[t[9]||(t[9]=(0,a.Lk)("h4",null,"响应内容：",-1)),(0,a.bF)(b,{modelValue:u.response.data,"onUpdate:modelValue":t[4]||(t[4]=e=>u.response.data=e),type:"textarea",rows:10,readonly:"",class:"response-textarea"},null,8,["modelValue"])])])):((0,a.uX)(),(0,a.Wv)(E,{key:1,description:"暂无响应数据"}))]),_:1})])}var d=l(953),i=l(163),c=l(8548),m=l(5220),p=l(4335),b={name:"ApiTest",components:{Position:c.Position,RefreshLeft:c.RefreshLeft},setup(){const e=(0,d.KR)(!1),t=(0,d.KR)(null),l=(0,d.Kh)({method:"GET",url:"",headers:"",body:""}),a=(0,m.lq)();a.query.method&&(l.method=a.query.method),a.query.url&&(l.url=a.query.url);const o=async()=>{if(!l.url)return void i.nk.warning("请输入API接口地址");e.value=!0;const a=Date.now();try{let s={};if(l.headers)try{s=JSON.parse(l.headers)}catch(o){return i.nk.error("请求头格式错误，请使用JSON格式"),void(e.value=!1)}let r=null;if(l.body&&"GET"!==l.method)try{r=JSON.parse(l.body)}catch(o){return i.nk.error("请求体格式错误，请使用JSON格式"),void(e.value=!1)}const n={method:l.method.toLowerCase(),url:l.url,headers:s,timeout:3e4};r&&(n.data=r);const u=await(0,p.A)(n),d=Date.now();t.value={status:u.status,duration:d-a,data:JSON.stringify(u.data,null,2)},i.nk.success("请求发送成功")}catch(s){const e=Date.now();t.value={status:s.response?.status||"Error",duration:e-a,data:JSON.stringify({error:s.message,details:s.response?.data||"网络错误或服务器无响应"},null,2)},i.nk.error("请求失败："+s.message)}finally{e.value=!1}},s=()=>{l.method="GET",l.url="",l.headers="",l.body="",t.value=null},r=e=>e>=200&&e<300?"success":e>=300&&e<400?"warning":e>=400?"danger":"info";return{testForm:l,loading:e,response:t,sendRequest:o,clearForm:s,getStatusType:r}}},f=l(6262);const k=(0,f.A)(b,[["render",u],["__scopeId","data-v-cc5648fe"]]);var F=k}}]);
//# sourceMappingURL=489.328ae3d2.js.map